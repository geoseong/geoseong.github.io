{"pageContext":{"isCreatedByStatefulCreatePages":false,"notebook":"React-web","section":"React.js[실습]","page":{"id":"0-b2ee58784e30c94c98da20697e15eed2!1-BC575AB8E2AB9833!2147","self":"https://www.onenote.com/api/v1.0/me/notes/pages/0-b2ee58784e30c94c98da20697e15eed2!1-BC575AB8E2AB9833!2147","createdTime":"2018-05-06T05:48:11.492Z","title":"Spa-github-pages","createdByAppId":"","links":{"oneNoteEmbedUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!2142&parId=BC575AB8E2AB9833!109&wd=target%28React.js%5B%EC%8B%A4%EC%8A%B5%5D.one%7C3645fdc8-397e-b34c-bee1-c170258420bb%2FSpa-github-pages%7C28015c22-bc74-934f-ae0b-a920b7bc9053%2F%29"},"oneNoteClientUrl":{"href":"onenote:https://d.docs.live.net/bc575ab8e2ab9833/Documents/React-web/React.js%5B%EC%8B%A4%EC%8A%B5%5D.one#Spa-github-pages&section-id=3645fdc8-397e-b34c-bee1-c170258420bb&page-id=28015c22-bc74-934f-ae0b-a920b7bc9053&end"},"oneNoteWebUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!2142&parId=BC575AB8E2AB9833!109&wd=target%28React.js%5B%EC%8B%A4%EC%8A%B5%5D.one%7C3645fdc8-397e-b34c-bee1-c170258420bb%2FSpa-github-pages%7C28015c22-bc74-934f-ae0b-a920b7bc9053%2F%29"}},"contentUrl":"https://www.onenote.com/api/v1.0/me/notes/pages/0-b2ee58784e30c94c98da20697e15eed2!1-BC575AB8E2AB9833!2147/content","lastModifiedTime":"2018-05-06T05:48:29Z","parentSection@odata.context":"https://www.onenote.com/api/v1.0/$metadata#me/notes/sections('0-BC575AB8E2AB9833%212147')/pages('0-b2ee58784e30c94c98da20697e15eed2%211-BC575AB8E2AB9833%212147')/parentSection(id,name,self)/$entity","parentSection":{"id":"0-BC575AB8E2AB9833!2147","name":"React.js[실습]","self":"https://www.onenote.com/api/v1.0/me/notes/sections/0-BC575AB8E2AB9833!2147"},"content":"       How it works    When the GitHub Pages server gets a request for a path defined with frontend routes, e.g. example.tld/foo, it returns a custom 404.html page. The custom 404.html page contains a script that takes the current url and converts the path and query string into just a query string, and then redirects the browser to the new url with only a query string and hash fragment. For example, example.tld/one/two?a=b&c=d#qwe, becomes example.tld/?p=/one/two&q=a=b~and~c=d#qwe.    The GitHub Pages server receives the new request, e.g. example.tld?p=/..., ignores the query string and hash fragment and returns the index.html file, which has a script that checks for a redirect in the query string before the single page app is loaded. If a redirect is present it is converted back into the correct url and added to the browser's history with window.history.replaceState(...), but the browser won't attempt to load the new url. When the single page app is loaded further down in the index.html file, the correct url will be waiting in the browser's history for the single page app to route accordingly. (Note that these redirects are only needed with fresh page loads, and not when navigating within the single page app once it's loaded).    A quick SEO note - while it's never good to have a 404 response, it appears based on Search Engine Land's testing that Google's crawler will treat the JavaScript window.location redirect in the 404.html file the same as a 301 redirect for its indexing. From my testing I can confirm that Google will index all pages without issue, the only caveat is that the redirect query is what Google indexes as the url. For example, the url example.tld/about will get indexed as example.tld/?p=/about. When the user clicks on the search result, the url will change back to example.tld/about once the site loads.               ","html":"\n\t\t<div style=\"position:absolute;left:54px;top:109px;width:570px\">\n\t\t\t<h2 lang=\"ko-KR\" style=\"font-size:14pt;color:#2e75b5;margin-top:18pt;margin-bottom:12pt\">How it works</h2>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:12pt\"><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">When the GitHub Pages server gets a request for a path defined with frontend routes, e.g.</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">example.tld/foo</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">, it returns a custom</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">404.html</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">page. The</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><a href=\"https://github.com/rafrex/spa-github-pages/blob/gh-pages/404.html\" lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt\">custom&#xA0;</a><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt\">404.html</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt\">&#xA0;page contains a script</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">that takes the current url and converts the path and query string into just a query string, and then redirects the browser to the new url with only a query string and hash fragment. For example,</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">example.tld/one/two?a=b&amp;c=d#qwe</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">, becomes</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">example.tld/?p=/one/two&amp;q=a=b~and~c=d#qwe</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">.</span></p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:12pt\"><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">The GitHub Pages server receives the new request, e.g.</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">example.tld?p=/...</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">, ignores the query string and hash fragment and returns the</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">index.html</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">file, which has a</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><a href=\"https://github.com/rafrex/spa-github-pages/blob/gh-pages/index.html#L58\" lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt\">script that checks for a redirect in the query string</a><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">before the single page app is loaded. If a redirect is present it is converted back into the correct url and added to the browser&apos;s history with</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">window.history.replaceState(...)</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">, but the browser won&apos;t attempt to load the new url. When the</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><a href=\"https://github.com/rafrex/spa-github-pages/blob/gh-pages/index.html#L94\" lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt\">single page app is loaded</a><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">further down in the</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">index.html</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">file, the correct url will be waiting in the browser&apos;s history for the single page app to route accordingly. (Note that these redirects are only needed with fresh page loads, and not when navigating within the single page app once it&apos;s loaded).</span></p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:12pt\"><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">A quick SEO note - while it&apos;s never good to have a 404 response, it appears based on</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><a href=\"http://searchengineland.com/tested-googlebot-crawls-javascript-heres-learned-220157\" lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt\">Search Engine Land&apos;s testing</a><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">that Google&apos;s crawler will treat the JavaScript</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">window.location</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">redirect in the</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">404.html</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">file the same as a 301 redirect for its indexing. From my testing I can confirm that Google will index all pages without issue, the only caveat is that the redirect query is what Google indexes as the url. For example, the url</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">example.tld/about</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">will get indexed as</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">example.tld/?p=/about</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">. When the user clicks on the search result, the url will change back to</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">example.tld/about</span><span lang=\"en-US\" style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">&#xA0;</span><span style=\"font-family:-apple-system;font-size:12pt;color:#24292e\">once the site loads.</span></p>\n\t\t\t<br>\n\t\t\t<br>\n\t\t</div>\n\t\n\n"}}}