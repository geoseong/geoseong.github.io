{"pageContext":{"isCreatedByStatefulCreatePages":false,"notebook":"Web Dev","section":"Docker","page":{"id":"0-f22a1f3aa463ae4e85f6288856cd6f16!1-BC575AB8E2AB9833!2141","self":"https://www.onenote.com/api/v1.0/me/notes/pages/0-f22a1f3aa463ae4e85f6288856cd6f16!1-BC575AB8E2AB9833!2141","createdTime":"2018-10-26T09:19:59.038Z","title":"GitLab CI로 serverless framework사용하기","createdByAppId":"","links":{"oneNoteEmbedUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!1937&parId=BC575AB8E2AB9833!109&wd=target%28Docker.one%7Cc134cdbf-f311-3945-bbdb-f8eecc1a6d52%2FGitLab%20CI%EB%A1%9C%20serverless%20framework%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0%7C01a4b17d-4d1a-0a47-81a7-7fb2b6c7d5eb%2F%29"},"oneNoteClientUrl":{"href":"onenote:https://d.docs.live.net/bc575ab8e2ab9833/Documents/Web%20Dev/Docker.one#GitLab%20CI%EB%A1%9C%20serverless%20framework%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0&section-id=c134cdbf-f311-3945-bbdb-f8eecc1a6d52&page-id=01a4b17d-4d1a-0a47-81a7-7fb2b6c7d5eb&end"},"oneNoteWebUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!1937&parId=BC575AB8E2AB9833!109&wd=target%28Docker.one%7Cc134cdbf-f311-3945-bbdb-f8eecc1a6d52%2FGitLab%20CI%EB%A1%9C%20serverless%20framework%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0%7C01a4b17d-4d1a-0a47-81a7-7fb2b6c7d5eb%2F%29"}},"contentUrl":"https://www.onenote.com/api/v1.0/me/notes/pages/0-f22a1f3aa463ae4e85f6288856cd6f16!1-BC575AB8E2AB9833!2141/content","lastModifiedTime":"2019-02-12T05:49:45Z","parentSection@odata.context":"https://www.onenote.com/api/v1.0/$metadata#me/notes/sections('0-BC575AB8E2AB9833%212141')/pages('0-f22a1f3aa463ae4e85f6288856cd6f16%211-BC575AB8E2AB9833%212141')/parentSection(id,name,self)/$entity","parentSection":{"id":"0-BC575AB8E2AB9833!2141","name":"Docker","self":"https://www.onenote.com/api/v1.0/me/notes/sections/0-BC575AB8E2AB9833!2141"},"content":"       https://about.gitlab.com/2017/07/13/making-ci-easier-with-gitlab/                # Dockerfile에 serverless framework global로 설치    **입력**    ```    # Ref: https://github.com/nikolaik/docker-python-nodejs    FROM nikolaik/python-nodejs:latest    RUN pip install awscli    RUN npm install serverless -g    ```        **Registry 만들때 콘솔**    ```    Step 3/3 : RUN npm install serverless -g     ---> Running in bd977481519c    /usr/bin/serverless -> /usr/lib/node_modules/serverless/bin/serverless    /usr/bin/slss -> /usr/lib/node_modules/serverless/bin/serverless    /usr/bin/sls -> /usr/lib/node_modules/serverless/bin/serverless        > spawn-sync@1.0.15 postinstall /usr/lib/node_modules/serverless/node_modules/spawn-sync    > node postinstall            > serverless@1.32.0 postinstall /usr/lib/node_modules/serverless    > node ./scripts/postinstall.js            ┌───────────────────────────────────────────────────┐    │          serverless update check failed           │    │        Try running with sudo or get access        │    │       to the local update config store via        │    │ sudo chown -R $USER:$(id -gn $USER) /root/.config │    └───────────────────────────────────────────────────┘    + serverless@1.32.0    added 346 packages from 257 contributors in 16.123s    ```        **Registry 사용 시 콘솔**    ```    $ serverless deploy           Serverless Error ---------------------------------------           Serverless plugin \"serverless-offline\" not found. Make sure it's installed and listed in the \"plugins\" section of your serverless config file.           Get Support --------------------------------------------         Docs:          docs.serverless.com         Bugs:          github.com/serverless/serverless/issues         Issues:        forum.serverless.com           Your Environment Information -----------------------------         OS:                     linux         Node Version:           10.11.0         Serverless Version:     1.32.0    ```        **해결책**    `$ sed` 명령으로 `serverless.yml`에 존재하는 `serverless-offline` 플러그인을 없애고 `$ sls deploy` 하면 된다.       ","html":"\n\t\t<div style=\"position:absolute;left:48px;top:139px;width:576px\">\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"https://about.gitlab.com/2017/07/13/making-ci-easier-with-gitlab/\">https://about.gitlab.com/2017/07/13/making-ci-easier-with-gitlab/</a></p>\n\t\t\t<br>\n\t\t\t<br>\n\t\t\t<br>\n\t\t\t<h2 style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\"># Dockerfile<span style=\"font-family:Malgun Gothic\">&#xC5D0;</span> serverless framework global<span style=\"font-family:Malgun Gothic\">&#xB85C;</span> <span style=\"font-family:Malgun Gothic\">&#xC124;&#xCE58;</span></h2>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">**<span style=\"font-family:Malgun Gothic\">&#xC785;&#xB825;</span>**</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">```</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"># Ref: <a href=\"https://github.com/nikolaik/docker-python-nodejs\">https://github.com/nikolaik/docker-python-nodejs</a></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">FROM nikolaik/python-nodejs:latest</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">RUN pip install awscli</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">RUN npm install serverless -g</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">```</p>\n\t\t\t<br>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">**Registry <span style=\"font-family:Malgun Gothic\">&#xB9CC;&#xB4E4;&#xB54C;</span> <span style=\"font-family:Malgun Gothic\">&#xCF58;&#xC194;</span>**</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">```</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">Step 3/3 : RUN npm install serverless -g</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"> ---&gt; Running in bd977481519c</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">/usr/bin/serverless -&gt; /usr/lib/node_modules/serverless/bin/serverless</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">/usr/bin/slss -&gt; /usr/lib/node_modules/serverless/bin/serverless</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">/usr/bin/sls -&gt; /usr/lib/node_modules/serverless/bin/serverless</p>\n\t\t\t<br>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">&gt; spawn-sync@1.0.15 postinstall /usr/lib/node_modules/serverless/node_modules/spawn-sync</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">&gt; node postinstall</p>\n\t\t\t<br>\n\t\t\t<br>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">&gt; serverless@1.32.0 postinstall /usr/lib/node_modules/serverless</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">&gt; node ./scripts/postinstall.js</p>\n\t\t\t<br>\n\t\t\t<br>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">&#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">&#x2502;          serverless update check failed           &#x2502;</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">&#x2502;        Try running with sudo or get access        &#x2502;</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">&#x2502;       to the local update config store via        &#x2502;</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">&#x2502; sudo chown -R $USER:$(id -gn $USER) /root/.config &#x2502;</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">&#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">+ serverless@1.32.0</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">added 346 packages from 257 contributors in 16.123s</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">```</p>\n\t\t\t<br>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">**Registry <span style=\"font-family:Malgun Gothic\">&#xC0AC;&#xC6A9;</span> <span style=\"font-family:Malgun Gothic\">&#xC2DC;</span> <span style=\"font-family:Malgun Gothic\">&#xCF58;&#xC194;</span>**</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">```</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">$ serverless deploy</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"> </p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">  Serverless Error ---------------------------------------</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"> </p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">  Serverless plugin &quot;serverless-offline&quot; not found. Make sure it&apos;s installed and listed in the &quot;plugins&quot; section of your serverless config file.</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"> </p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">  Get Support --------------------------------------------</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">     Docs:          docs.serverless.com</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">     Bugs:          github.com/serverless/serverless/issues</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">     Issues:        forum.serverless.com</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"> </p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">  Your Environment Information -----------------------------</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">     OS:                     linux</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">     Node Version:           10.11.0</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">     Serverless Version:     1.32.0</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">```</p>\n\t\t\t<br>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">**<span style=\"font-family:Malgun Gothic\">&#xD574;&#xACB0;&#xCC45;</span>**</p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">`$ sed` <span style=\"font-family:Malgun Gothic\">&#xBA85;&#xB839;&#xC73C;&#xB85C;</span> `serverless.yml`<span style=\"font-family:Malgun Gothic\">&#xC5D0;</span> <span style=\"font-family:Malgun Gothic\">&#xC874;&#xC7AC;&#xD558;&#xB294;</span> `serverless-offline` <span style=\"font-family:Malgun Gothic\">&#xD50C;&#xB7EC;&#xADF8;&#xC778;&#xC744;</span> <span style=\"font-family:Malgun Gothic\">&#xC5C6;&#xC560;&#xACE0;</span> `$ sls deploy` <span style=\"font-family:Malgun Gothic\">&#xD558;&#xBA74;</span> <span style=\"font-family:Malgun Gothic\">&#xB41C;&#xB2E4;</span>.</p>\n\t\t</div>\n\t\n\n"}}}