{"pageContext":{"notebook":"React-Native","section":"ReactNative","page":{"id":"0-0d7bdd955ef63c081843e3365dbeefd1!1-BC575AB8E2AB9833!2154","self":"https://www.onenote.com/api/v1.0/me/notes/pages/0-0d7bdd955ef63c081843e3365dbeefd1!1-BC575AB8E2AB9833!2154","createdTime":"2018-08-06T12:40:49.587Z","title":"[Common]Fetch timeout & cancel","createdByAppId":"","links":{"oneNoteEmbedUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!2149&parId=BC575AB8E2AB9833!109&wd=target%28ReactNative.one%7Cbe289a69-87c8-054e-8d73-1b4e92294c1b%2F%5BCommon%5DFetch%20timeout%20%20cancel%7Cbcc9629f-0ef6-2449-af92-f7d3b59c7ee6%2F%29"},"oneNoteClientUrl":{"href":"onenote:https://d.docs.live.net/bc575ab8e2ab9833/Documents/React-Native/ReactNative.one#%5BCommon%5DFetch%20timeout%20%20cancel&section-id=be289a69-87c8-054e-8d73-1b4e92294c1b&page-id=bcc9629f-0ef6-2449-af92-f7d3b59c7ee6&end"},"oneNoteWebUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!2149&parId=BC575AB8E2AB9833!109&wd=target%28ReactNative.one%7Cbe289a69-87c8-054e-8d73-1b4e92294c1b%2F%5BCommon%5DFetch%20timeout%20%20cancel%7Cbcc9629f-0ef6-2449-af92-f7d3b59c7ee6%2F%29"}},"contentUrl":"https://www.onenote.com/api/v1.0/me/notes/pages/0-0d7bdd955ef63c081843e3365dbeefd1!1-BC575AB8E2AB9833!2154/content","lastModifiedTime":"2018-08-06T13:13:05Z","parentSection@odata.context":"https://www.onenote.com/api/v1.0/$metadata#me/notes/sections('0-BC575AB8E2AB9833%212154')/pages('0-0d7bdd955ef63c081843e3365dbeefd1%211-BC575AB8E2AB9833%212154')/parentSection(id,name,self)/$entity","parentSection":{"id":"0-BC575AB8E2AB9833!2154","name":"ReactNative","self":"https://www.onenote.com/api/v1.0/me/notes/sections/0-BC575AB8E2AB9833!2154"},"content":"       Using AbortController    Abort Controller MDN    https://developer.mozilla.org/en-US/docs/Web/API/AbortController    GitHub issue    https://github.com/matthew-andrews/isomorphic-fetch/issues/48               const controller = new AbortController()￼const signal = controller.signal￼            setTimeout(() => { ￼  controller.abort()￼}, 1000)￼            fetch(url, { signal })                       StackOverflow    https://stackoverflow.com/questions/46946380/fetch-api-request-timeout               // Rough implementation. Untested.￼function timeout(ms, promise) {￼  return new Promise(function(resolve, reject) {￼    setTimeout(function() {￼      reject(new Error(\"timeout\"))￼    }, ms)￼    promise.then(resolve, reject)￼  })￼}￼      timeout(1000, fetch('/hello')).then(function(response) {￼  // process response￼}).catch(function(error) {￼  // might be a timeout error￼})                      ","html":"\n\t\t<div style=\"position:absolute;left:48px;top:115px;width:576px\">\n\t\t\t<h2 style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">Using AbortController</h2>\n\t\t\t<h3 style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\">Abort Controller MDN</h3>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/AbortController\">https://developer.mozilla.org/en-US/docs/Web/API/AbortController</a></p>\n\t\t\t<h3 style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\">GitHub issue</h3>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"https://github.com/matthew-andrews/isomorphic-fetch/issues/48\">https://github.com/matthew-andrews/isomorphic-fetch/issues/48</a></p>\n\t\t\t<table style=\"border:1px solid;border-collapse:collapse\">\n\t\t\t\t<tbody><tr>\n\t\t\t\t\t<td style=\"background-color:#f2f2f2;border:1px solid\"><p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#d73a49;background-color:#f6f8fa\">const</span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\"> </span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#005cc5;background-color:#f6f8fa\">controller</span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\"> </span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#d73a49;background-color:#f6f8fa\">=</span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\"> </span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#d73a49;background-color:#f6f8fa\">new</span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\"> </span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#6f42c1;background-color:#f6f8fa\">AbortController</span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\">()</span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\">&#xFFFC;</span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#d73a49;background-color:#f6f8fa\">const</span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\"> </span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#005cc5;background-color:#f6f8fa\">signal</span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\"> </span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#d73a49;background-color:#f6f8fa\">=</span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\"> controller.signal</span><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\">&#xFFFC;</span></p>\n\t\t\t\t\t<br>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#005cc5;background-color:#f6f8fa\">setTimeout</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\">(() </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#d73a49;background-color:#f6f8fa\">=&gt;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\"> { </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\">&#xFFFC;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\">  controller.</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#005cc5;background-color:#f6f8fa\">abort</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\">()</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\">&#xFFFC;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\">}, </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#005cc5;background-color:#f6f8fa\">1000</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\">)</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\">&#xFFFC;</span></p>\n\t\t\t\t\t<br>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#6f42c1;background-color:#f6f8fa\">fetch</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:8.5pt;color:#24292e;background-color:#f6f8fa\">(url, { signal })</span></p>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody></table>\n\t\t\t<br>\n\t\t\t<h2 style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">StackOverflow</h2>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"https://stackoverflow.com/questions/46946380/fetch-api-request-timeout\">https://stackoverflow.com/questions/46946380/fetch-api-request-timeout</a></p>\n\t\t\t<table style=\"border:1px solid;border-collapse:collapse\">\n\t\t\t\t<tbody><tr>\n\t\t\t\t\t<td style=\"background-color:#f2f2f2;border:1px solid\"><p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:inherit;font-size:9.5pt;color:#828990;background-color:#eff0f1\">// Rough implementation. Untested.</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">&#xFFFC;</span><span style=\"font-family:inherit;font-size:9.5pt;color:#101094;background-color:#eff0f1\">function</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\"> timeout(ms, promise) {</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">&#xFFFC;</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">  </span><span style=\"font-family:inherit;font-size:9.5pt;color:#101094;background-color:#eff0f1\">return</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\"> </span><span style=\"font-family:inherit;font-size:9.5pt;color:#101094;background-color:#eff0f1\">new</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\"> </span><span style=\"font-family:inherit;font-size:9.5pt;color:#2b91af;background-color:#eff0f1\">Promise</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">(</span><span style=\"font-family:inherit;font-size:9.5pt;color:#101094;background-color:#eff0f1\">function</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">(resolve, reject) {</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">&#xFFFC;</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">    setTimeout(</span><span style=\"font-family:inherit;font-size:9.5pt;color:#101094;background-color:#eff0f1\">function</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">() {</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">&#xFFFC;</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">      reject(</span><span style=\"font-family:inherit;font-size:9.5pt;color:#101094;background-color:#eff0f1\">new</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\"> </span><span style=\"font-family:inherit;font-size:9.5pt;color:#2b91af;background-color:#eff0f1\">Error</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">(</span><span style=\"font-family:inherit;font-size:9.5pt;color:#7d2727;background-color:#eff0f1\">&quot;timeout&quot;</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">))</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">&#xFFFC;</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">    }, ms)</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">&#xFFFC;</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">    promise.</span><span style=\"font-family:inherit;font-size:9.5pt;color:#101094;background-color:#eff0f1\">then</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">(resolve, reject)</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">&#xFFFC;</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">  })</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">&#xFFFC;</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">}</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">&#xFFFC;</span></p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">timeout(</span><span style=\"font-family:inherit;font-size:9.5pt;color:#7d2727;background-color:#eff0f1\">1000</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">, fetch(</span><span style=\"font-family:inherit;font-size:9.5pt;color:#7d2727;background-color:#eff0f1\">&apos;/hello&apos;</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">)).</span><span style=\"font-family:inherit;font-size:9.5pt;color:#101094;background-color:#eff0f1\">then</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">(</span><span style=\"font-family:inherit;font-size:9.5pt;color:#101094;background-color:#eff0f1\">function</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">(response) {</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">&#xFFFC;</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">  </span><span style=\"font-family:inherit;font-size:9.5pt;color:#828990;background-color:#eff0f1\">// process response</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">&#xFFFC;</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">}).</span><span style=\"font-family:inherit;font-size:9.5pt;color:#101094;background-color:#eff0f1\">catch</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">(</span><span style=\"font-family:inherit;font-size:9.5pt;color:#101094;background-color:#eff0f1\">function</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">(error) {</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">&#xFFFC;</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">  </span><span style=\"font-family:inherit;font-size:9.5pt;color:#828990;background-color:#eff0f1\">// might be a timeout error</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">&#xFFFC;</span><span style=\"font-family:inherit;font-size:9.5pt;color:#303336;background-color:#eff0f1\">})</span></p>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody></table>\n\t\t</div>\n\t\n\n"}}}