{"pageContext":{"notebook":"AWS","section":"AWS Serverless","page":{"id":"0-911f763bb34e1c093df994b41e69d54e!1-BC575AB8E2AB9833!2059","self":"https://www.onenote.com/api/v1.0/me/notes/pages/0-911f763bb34e1c093df994b41e69d54e!1-BC575AB8E2AB9833!2059","createdTime":"2018-04-01T07:01:54.601Z","title":"Serverless CORS 가이드","createdByAppId":"","links":{"oneNoteEmbedUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!2000&parId=BC575AB8E2AB9833!109&wd=target%28AWS%20Serverless.one%7C310eb790-101c-5d47-8187-ebe85d1c5958%2FServerless%20CORS%20%EA%B0%80%EC%9D%B4%EB%93%9C%7Cc9739833-c0e7-474c-9538-a1cd0b5ecaf4%2F%29"},"oneNoteClientUrl":{"href":"onenote:https://d.docs.live.net/bc575ab8e2ab9833/Documents/AWS/AWS%20Serverless.one#Serverless%20CORS%20%EA%B0%80%EC%9D%B4%EB%93%9C&section-id=310eb790-101c-5d47-8187-ebe85d1c5958&page-id=c9739833-c0e7-474c-9538-a1cd0b5ecaf4&end"},"oneNoteWebUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!2000&parId=BC575AB8E2AB9833!109&wd=target%28AWS%20Serverless.one%7C310eb790-101c-5d47-8187-ebe85d1c5958%2FServerless%20CORS%20%EA%B0%80%EC%9D%B4%EB%93%9C%7Cc9739833-c0e7-474c-9538-a1cd0b5ecaf4%2F%29"}},"contentUrl":"https://www.onenote.com/api/v1.0/me/notes/pages/0-911f763bb34e1c093df994b41e69d54e!1-BC575AB8E2AB9833!2059/content","lastModifiedTime":"2018-04-01T08:19:22Z","parentSection@odata.context":"https://www.onenote.com/api/v1.0/$metadata#me/notes/sections('0-BC575AB8E2AB9833%212059')/pages('0-911f763bb34e1c093df994b41e69d54e%211-BC575AB8E2AB9833%212059')/parentSection(id,name,self)/$entity","parentSection":{"id":"0-BC575AB8E2AB9833!2059","name":"AWS Serverless","self":"https://www.onenote.com/api/v1.0/me/notes/sections/0-BC575AB8E2AB9833!2059"},"content":"       Serverless    https://serverless.com/blog/cors-api-gateway-survival-guide/        Serverless.yml               functions:          getTokenInputCode:              handler: actualLambda/getTokenInputCode.index              name: onenote-getTokenInputCode # optional, Deployed Lambda name              description: onenote-브라우저에서 얻어낸 code입력해서 토큰받아내기 # optional, Description to publish to AWS              environment: ${self:custom.environment}              events:                  - http:                      path: /getToken                      method: post           cors: true                       에러메시지    Failed to load https://duok8m97kh.execute-api.ap-northeast-2.amazonaws.com/v001/sectionPages: Request header field Cache-Control is not allowed by Access-Control-Allow-Headers in preflight response.                해결방법         API Gateway -> OPTIONS메소드 -> Integration Response -> 목록을 펼친다 -> Header Mappings 안의 'Access-Control-Allow-Headers'에서 'Cache-Control'을 추가하고 저장한다.     Lambda 코딩에서도 header에다가 'Access-Control-Allow-Origin': '*'를 넣을 것     저장 후에 Stages에 Deploy하는 것 잊지 말것.           ","html":"\n\t\t<div style=\"position:absolute;left:48px;top:115px;width:576px\">\n\t\t\t<h2 lang=\"ko-KR\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">Serverless</h2>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"https://serverless.com/blog/cors-api-gateway-survival-guide/\">https://serverless.com/blog/cors-api-gateway-survival-guide/</a></p>\n\t\t\t<br>\n\t\t\t<h2 lang=\"ko-KR\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">Serverless.yml</h2>\n\t\t\t<table style=\"border:1px solid;border-collapse:collapse\">\n\t\t\t\t<tbody><tr>\n\t\t\t\t\t<td style=\"background-color:#e7e6e6;border:1px solid\"><p style=\"margin-top:0pt;margin-bottom:0pt\">functions:</p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">    getTokenInputCode:</p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">        handler: actualLambda/getTokenInputCode.index</p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">        name: onenote-getTokenInputCode # optional, Deployed Lambda name</p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">        description: onenote-<span style=\"font-family:Malgun Gothic\">&#xBE0C;&#xB77C;&#xC6B0;&#xC800;&#xC5D0;&#xC11C;</span> <span style=\"font-family:Malgun Gothic\">&#xC5BB;&#xC5B4;&#xB0B8;</span> code<span style=\"font-family:Malgun Gothic\">&#xC785;&#xB825;&#xD574;&#xC11C;</span> <span style=\"font-family:Malgun Gothic\">&#xD1A0;&#xD070;&#xBC1B;&#xC544;&#xB0B4;&#xAE30;</span> # optional, Description to publish to AWS</p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">        environment: ${self:custom.environment}</p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">        events:</p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">            - http:</p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">                path: /getToken</p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">                method: post</p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"color:#0432ff;font-weight:bold\">     cors: true</span></p>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody></table>\n\t\t\t<br>\n\t\t\t<h2 lang=\"ko-KR\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xC5D0;&#xB7EC;&#xBA54;&#xC2DC;&#xC9C0;</span></h2>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">Failed to load <a href=\"https://duok8m97kh.execute-api.ap-northeast-2.amazonaws.com/v001/sectionPages\">https://duok8m97kh.execute-api.ap-northeast-2.amazonaws.com/v001/sectionPages</a>: Request header field Cache-Control is not allowed by Access-Control-Allow-Headers in preflight response.</p>\n\t\t\t<br>\n\t\t\t<br>\n\t\t\t<br>\n\t\t\t<h2 style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xD574;&#xACB0;&#xBC29;&#xBC95;</span></h2>\n\t\t\t<ul>\n\t\t\t\t<li><span style=\"font-family:Malgun Gothic\">API Gateway -&gt; OPTIONS&#xBA54;&#xC18C;&#xB4DC; -&gt; Integration Response -&gt; &#xBAA9;&#xB85D;&#xC744; &#xD3BC;&#xCE5C;&#xB2E4; -&gt; Header Mappings &#xC548;&#xC758; &apos;Access-Control-Allow-Headers&apos;&#xC5D0;&#xC11C; &apos;Cache-Control&apos;&#xC744; &#xCD94;&#xAC00;&#xD558;&#xACE0; &#xC800;&#xC7A5;&#xD55C;&#xB2E4;.</span></li>\n\t\t\t\t<li><span style=\"font-family:Malgun Gothic\">Lambda &#xCF54;&#xB529;&#xC5D0;&#xC11C;&#xB3C4; header&#xC5D0;&#xB2E4;&#xAC00; </span><span lang=\"ko-KR\" style=\"font-weight:bold\">&apos;Access-Control-Allow-Origin&apos;: &apos;*&apos;</span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xB97C; &#xB123;&#xC744; &#xAC83;</span></li>\n\t\t\t\t<li><span style=\"font-family:Malgun Gothic\">&#xC800;&#xC7A5; &#xD6C4;&#xC5D0; Stages&#xC5D0; Deploy&#xD558;&#xB294; &#xAC83; &#xC78A;&#xC9C0; &#xB9D0;&#xAC83;.</span></li>\n\t\t\t</ul>\n\t\t</div>\n\t\n\n"}}}