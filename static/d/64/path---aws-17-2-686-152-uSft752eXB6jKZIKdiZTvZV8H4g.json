{"pageContext":{"isCreatedByStatefulCreatePages":false,"notebook":"AWS","section":"AWS Serverless","page":{"id":"0-0985a6a1fde1350c219aa7502b3bc3bd!1-BC575AB8E2AB9833!2059","self":"https://www.onenote.com/api/v1.0/me/notes/pages/0-0985a6a1fde1350c219aa7502b3bc3bd!1-BC575AB8E2AB9833!2059","createdTime":"2018-12-12T04:38:38Z","title":"Serverless: API endpoint wildcard 설정하기","createdByAppId":"","links":{"oneNoteEmbedUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!2000&parId=BC575AB8E2AB9833!109&wd=target%28AWS%20Serverless.one%7C310eb790-101c-5d47-8187-ebe85d1c5958%2FServerless%20API%20endpoint%20wildcard%20%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0%7C8261b073-6b2e-964b-a491-a69857393651%2F%29"},"oneNoteClientUrl":{"href":"onenote:https://d.docs.live.net/bc575ab8e2ab9833/Documents/AWS/AWS%20Serverless.one#Serverless%20API%20endpoint%20wildcard%20%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0&section-id=310eb790-101c-5d47-8187-ebe85d1c5958&page-id=8261b073-6b2e-964b-a491-a69857393651&end"},"oneNoteWebUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!2000&parId=BC575AB8E2AB9833!109&wd=target%28AWS%20Serverless.one%7C310eb790-101c-5d47-8187-ebe85d1c5958%2FServerless%20API%20endpoint%20wildcard%20%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0%7C8261b073-6b2e-964b-a491-a69857393651%2F%29"}},"contentUrl":"https://www.onenote.com/api/v1.0/me/notes/pages/0-0985a6a1fde1350c219aa7502b3bc3bd!1-BC575AB8E2AB9833!2059/content","lastModifiedTime":"2018-12-12T04:45:18Z","parentSection@odata.context":"https://www.onenote.com/api/v1.0/$metadata#me/notes/sections('0-BC575AB8E2AB9833%212059')/pages('0-0985a6a1fde1350c219aa7502b3bc3bd%211-BC575AB8E2AB9833%212059')/parentSection(id,name,self)/$entity","parentSection":{"id":"0-BC575AB8E2AB9833!2059","name":"AWS Serverless","self":"https://www.onenote.com/api/v1.0/me/notes/sections/0-BC575AB8E2AB9833!2059"},"content":"       API Gateway Update – New Features Simplify API Development        Catch-all Path Variables    Suppose I am creating a new e-commerce API. I start like this:            And then create the /store resource:            Then I use a catch-all path variable to intercept all requests to any resource within /store (I also had to check Configure as proxy resource):            Because {proxy+} routes requests for sub-resources to the actual resource, it must be used as the final element of the resource path; it does not make sense to use it elsewhere. The {proxy+} can match a path of any depth; the example above would also match /store/us/clothing, /store/us/clothing/children, and so forth.    The proxy can connect to a Lambda function or an HTTP endpoint:                GitHub: Use wildcard Example        All In One               service: hello-world￼      provider:￼  name: aws￼  runtime: nodejs4.3￼      functions:￼  api:￼    handler: src/server.handler￼    events:￼      - http:￼          path: / # this matches the base path￼          method: ANY￼      - http:￼          path: /{any+} # this matches any path, the token 'any' doesn't mean anything special￼          method: ANY                      ","html":"\n\t\t<div style=\"position:absolute;left:48px;top:139px;width:576px\">\n\t\t\t<h1 style=\"font-size:16pt;color:#1e4e79;margin-top:0pt;margin-bottom:0pt\"><a href=\"https://aws.amazon.com/ko/blogs/aws/api-gateway-update-new-features-simplify-api-development/\">API Gateway Update &#x2013; New Features Simplify API Development</a></h1>\n\t\t\t<br>\n\t\t\t<h2 lang=\"ko-KR\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">Catch-all Path Variables</h2>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#333333\">Suppose I am creating a new e-commerce API. I start like this:</span></p>\n\t\t\t<img alt=\"Create new API \nIn Amazon API Gateway, an API refers to a collection ot resources and methods that can be invoked through HTTPS endpoints. \n@ New API \nO \nO \nImport trom Swagger \nExample API \nName and description \nChoose a friendly name and description tor your API. \nAPI name* \nDescription \nCommerceAPI \nMy E-commerce APII \" width=\"851\" height=\"338\" src=\"https://www.onenote.com/api/v1.0/me/notes/resources/0-e99780b042d1a549b84dd35ae7d5bb42!1-BC575AB8E2AB9833!2059/content?publicAuth=true&amp;mimeType=image/png\" data-src-type=\"image/png\" data-fullres-src=\"https://www.onenote.com/api/v1.0/me/notes/resources/0-e99780b042d1a549b84dd35ae7d5bb42!1-BC575AB8E2AB9833!2059/content?publicAuth=true&amp;mimeType=image/png\" data-fullres-src-type=\"image/png\">\n\t\t\t<br>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#333333\">And then create the&#xA0;</span><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#c0392b;background-color:#dbe5f1\">/store</span><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#333333\">&#xA0;resource:</span></p>\n\t\t\t<img alt=\"Resources \n&apos;store \nActions&#x2014; \n[store Methods \" width=\"407\" height=\"179\" src=\"https://www.onenote.com/api/v1.0/me/notes/resources/0-3a93df05937f254fb9914e78fb786459!1-BC575AB8E2AB9833!2059/content?publicAuth=true&amp;mimeType=image/png\" data-src-type=\"image/png\" data-fullres-src=\"https://www.onenote.com/api/v1.0/me/notes/resources/0-3a93df05937f254fb9914e78fb786459!1-BC575AB8E2AB9833!2059/content?publicAuth=true&amp;mimeType=image/png\" data-fullres-src-type=\"image/png\">\n\t\t\t<br>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#333333\">Then I use a catch-all path variable to intercept all requests to any resource within&#xA0;</span><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#c0392b;background-color:#dbe5f1\">/store</span><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#333333\">&#xA0;(I also had to check&#xA0;Configure as proxy resource):</span></p>\n\t\t\t<img alt=\"New Child Resource \nUse this page to create a new child resource tor your resource. &#x2022; \nConfigure as Yproxy resource \nResource Name* \nResource Path* \nEnable API Gateway CORS \n* Required \nproxy \n&apos;store/ {proxy+} \nYou can add path parameters using brackets. For example, the resource path \n{username} represents a path parameter called &apos;username&apos; _ Configuring &apos;store \n&apos;{proxy+} as a proxy resource catches all requests to its sub-resources. For \nexample, it works tor a GET request to &apos;store/too_ To handle requests to &apos;store, \nadd a new ANY method on the &apos;store resource. \nCancel \nCreate Resource \" width=\"830\" height=\"509\" src=\"https://www.onenote.com/api/v1.0/me/notes/resources/0-12801b0ca622ce44b85585eb0abe03c8!1-BC575AB8E2AB9833!2059/content?publicAuth=true&amp;mimeType=image/png\" data-src-type=\"image/png\" data-fullres-src=\"https://www.onenote.com/api/v1.0/me/notes/resources/0-12801b0ca622ce44b85585eb0abe03c8!1-BC575AB8E2AB9833!2059/content?publicAuth=true&amp;mimeType=image/png\" data-fullres-src-type=\"image/png\">\n\t\t\t<br>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#333333\">Because&#xA0;</span><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#c0392b;background-color:#dbe5f1\">{proxy+}</span><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#333333\">&#xA0;routes requests for sub-resources to the actual resource, it must be used as the final element of the resource path; it does not make sense to use it elsewhere. The&#xA0;</span><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#c0392b;background-color:#dbe5f1\">{proxy+}</span><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#333333\">&#xA0;can match a path of any depth; the example above would also match&#xA0;</span><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#c0392b;background-color:#dbe5f1\">/store/us/clothing</span><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#333333\">,&#xA0;</span><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#c0392b;background-color:#dbe5f1\">/store/us/clothing/children, and so forth.</span></p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic;font-size:10.5pt;color:#333333\">The proxy can connect to a Lambda function or an HTTP endpoint:</span></p>\n\t\t\t<img alt=\"Resources \n&#x2022; &apos;store \nActions&#x2014; \n&#x2022; &apos;{proxy+} \nANY \nIstore/{proxy+} - ANY - Setup \nAPI Gateway will configure your ANY method as a proxy integration. Proxy integrations can communicate \nwith HTTP endpoints or Lambda functions. API Gateway sends the entire request to HTTP endpoints, \nincluding resource path, headers, query string parameters, and body For Lambda integrations, API \nGateway applies a default mapping to send all ot the request information and responses follow a default \nintertace_ To learn more read our Ydocumentation \nIntegration type @ Lambda Function Proxy \nO \nLambda Region \nSave \" width=\"908\" height=\"404\" src=\"https://www.onenote.com/api/v1.0/me/notes/resources/0-6788089fdc5db8408a6fc9141428d307!1-BC575AB8E2AB9833!2059/content?publicAuth=true&amp;mimeType=image/png\" data-src-type=\"image/png\" data-fullres-src=\"https://www.onenote.com/api/v1.0/me/notes/resources/0-6788089fdc5db8408a6fc9141428d307!1-BC575AB8E2AB9833!2059/content?publicAuth=true&amp;mimeType=image/png\" data-fullres-src-type=\"image/png\">\n\t\t\t<br>\n\t\t\t<br>\n\t\t\t<h1 style=\"font-size:16pt;color:#1e4e79;margin-top:0pt;margin-bottom:0pt\"><a href=\"https://github.com/dougmoscrop/serverless-http/blob/master/docs/EXAMPLES.md\">GitHub: Use wildcard Example</a></h1>\n\t\t\t<br>\n\t\t\t<h2 style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">All In One</h2>\n\t\t\t<table style=\"border:1px solid;border-collapse:collapse\">\n\t\t\t\t<tbody><tr>\n\t\t\t\t\t<td style=\"background-color:#f2f2f2;border:1px solid\"><p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:SFMono-Regular;font-size:10pt;color:#22863a\">service</span><span style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">: </span><span style=\"font-family:SFMono-Regular;font-size:10pt;color:#032f62\">hello-world</span><span style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">&#xFFFC;</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:SFMono-Regular;font-size:10pt;color:#22863a\">provider</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">:</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">&#xFFFC;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">  </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#22863a\">name</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">: </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#032f62\">aws</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">&#xFFFC;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">  </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#22863a\">runtime</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">: </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#032f62\">nodejs4.3</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">&#xFFFC;</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:SFMono-Regular;font-size:10pt;color:#22863a\">functions</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">:</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">&#xFFFC;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">  </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#22863a\">api</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">:</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">&#xFFFC;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">    </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#22863a\">handler</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">: </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#032f62\">src/server.handler</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">&#xFFFC;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">    </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#22863a\">events</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">:</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">&#xFFFC;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">      - </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#22863a\">http</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">:</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">&#xFFFC;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">          </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#22863a\">path</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">: / </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#6a737d\"># this matches the base path</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">&#xFFFC;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">          </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#22863a\">method</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">: </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#032f62\">ANY</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">&#xFFFC;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">      - </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#22863a\">http</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">:</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">&#xFFFC;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">          </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#22863a\">path</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">: </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#032f62\">/{any+} </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#6a737d\"># this matches any path, the token &apos;any&apos; doesn&apos;t mean anything special</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">&#xFFFC;</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">          </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#22863a\">method</span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#24292e\">: </span><span lang=\"en-US\" style=\"font-family:SFMono-Regular;font-size:10pt;color:#032f62\">ANY</span></p>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody></table>\n\t\t</div>\n\t\n\n"}}}