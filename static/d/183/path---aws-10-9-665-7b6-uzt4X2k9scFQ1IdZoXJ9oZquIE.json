{"pageContext":{"isCreatedByStatefulCreatePages":false,"notebook":"AWS","section":"AWS Lambda","page":{"id":"0-9b9ca12365664d4d96bbba045c152179!1-BC575AB8E2AB9833!2098","self":"https://www.onenote.com/api/v1.0/me/notes/pages/0-9b9ca12365664d4d96bbba045c152179!1-BC575AB8E2AB9833!2098","createdTime":"2018-01-01T05:56:15.189Z","title":"Lambda RDS 연결 환경세팅 기록","createdByAppId":"","links":{"oneNoteEmbedUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!2000&parId=BC575AB8E2AB9833!109&wd=target%28AWS%20Lambda.one%7C01064184-321d-f845-a242-b424116ecdf9%2FLambda%20RDS%20%EC%97%B0%EA%B2%B0%20%ED%99%98%EA%B2%BD%EC%84%B8%ED%8C%85%20%EA%B8%B0%EB%A1%9D%7C1cce26e3-a17c-6a40-a160-38f45b160475%2F%29"},"oneNoteClientUrl":{"href":"onenote:https://d.docs.live.net/bc575ab8e2ab9833/Documents/AWS/AWS%20Lambda.one#Lambda%20RDS%20%EC%97%B0%EA%B2%B0%20%ED%99%98%EA%B2%BD%EC%84%B8%ED%8C%85%20%EA%B8%B0%EB%A1%9D&section-id=01064184-321d-f845-a242-b424116ecdf9&page-id=1cce26e3-a17c-6a40-a160-38f45b160475&end"},"oneNoteWebUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!2000&parId=BC575AB8E2AB9833!109&wd=target%28AWS%20Lambda.one%7C01064184-321d-f845-a242-b424116ecdf9%2FLambda%20RDS%20%EC%97%B0%EA%B2%B0%20%ED%99%98%EA%B2%BD%EC%84%B8%ED%8C%85%20%EA%B8%B0%EB%A1%9D%7C1cce26e3-a17c-6a40-a160-38f45b160475%2F%29"}},"contentUrl":"https://www.onenote.com/api/v1.0/me/notes/pages/0-9b9ca12365664d4d96bbba045c152179!1-BC575AB8E2AB9833!2098/content","lastModifiedTime":"2018-05-14T03:58:51Z","parentSection@odata.context":"https://www.onenote.com/api/v1.0/$metadata#me/notes/sections('0-BC575AB8E2AB9833%212098')/pages('0-9b9ca12365664d4d96bbba045c152179%211-BC575AB8E2AB9833%212098')/parentSection(id,name,self)/$entity","parentSection":{"id":"0-BC575AB8E2AB9833!2098","name":"AWS Lambda","self":"https://www.onenote.com/api/v1.0/me/notes/sections/0-BC575AB8E2AB9833!2098"},"content":"       https://gist.github.com/geoseong/186c7285c9e1e3ba380901734a93557f        AWS Lambda         AWS Lambda           펑션 만들기 : Author from scratch / Blueprints 중 택일      Funciton code 영역             설치된 외부 node.js 라이브러리 적용시키기                  Environment variables 영역             환경변수 사용자 정의 설정하기                  Basic Settings 영역             description 입력, 메모리할당, Timeout 지정하기                  Network 영역             RDS인스턴스에 해당하는 VPC, Subnets, Security Group 지정하기                           AWS IAM           Root계정 소유자에게 IAM 제어권 요청 or 생성한 Lambda Role Policy 변경 요청      해당 Role에서 Attach Policy 해보기             AmazonVPCReadOnlyAccess       AWSLambdaVPCAccessExecutionRole                           AWS RDS Security Group           EC2의 Security Groups 메뉴에서 RDS인스턴스에 해당하는 Inbound rule 세팅하기             IP 말고 Security group ID를 직접 입력해서 추가하도록.                           AWS VPC (optional. 안해도 잘 돌아간다.)           NAT Gateways             Create Nat Gateway로 subnet중 하나 골라서 Elastic IP가 없다면 만든 이후에 NAT Gateway를 만든다.                           Amazon API Gateway           API 추가하기      Resources 추가하기      Method Request             Authorization 세팅 변경하기                  TEST 해보기               Amazon CloudWatch           Logs             Logs에 들어가 Lambda에서 내가 만든 Role의 이름이 곧 Log groups에 있음       API Gateway에서 TEST한 이후, Lambda function 중 console.log()등의 정보와 시스템 메시지를 이곳에서 확인가능                              AWS IAM    AWS RDS Security Group    AWS VPC (optional. 안해도 잘 돌아간다.)    NAT Gateways    Amazon API Gateway    Amazon CloudWatch           ","html":"\n\t\t<div style=\"position:absolute;left:48px;top:139px;width:576px\">\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"https://gist.github.com/geoseong/186c7285c9e1e3ba380901734a93557f\">https://gist.github.com/geoseong/186c7285c9e1e3ba380901734a93557f</a></p>\n\t\t\t<br>\n\t\t\t<h2 style=\"font-family:Calibri;font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">AWS Lambda</h2>\n\t\t\t<ul>\n\t\t\t\t<li><h2 style=\"font-family:Calibri;font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">AWS Lambda</h2>\n\t\t\t\t<ul>\n\t\t\t\t\t<li style=\"list-style-type:circle\">&#xD391;&#xC158; &#xB9CC;&#xB4E4;&#xAE30; :&#xA0;<span style=\"font-family:SFMono-Regular;font-size:10pt\">Author from scratch</span>&#xA0;/&#xA0;<span style=\"font-family:SFMono-Regular;font-size:10pt\">Blueprints</span>&#xA0;&#xC911; &#xD0DD;&#xC77C;</li>\n\t\t\t\t\t<li style=\"list-style-type:circle\"><p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:SFMono-Regular;font-size:10pt\">Funciton code</span>&#xA0;&#xC601;&#xC5ED;</p>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>&#xC124;&#xCE58;&#xB41C; &#xC678;&#xBD80; node.js &#xB77C;&#xC774;&#xBE0C;&#xB7EC;&#xB9AC; &#xC801;&#xC6A9;&#xC2DC;&#xD0A4;&#xAE30;</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li style=\"list-style-type:circle\"><p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:SFMono-Regular;font-size:10pt\">Environment variables</span>&#xA0;&#xC601;&#xC5ED;</p>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>&#xD658;&#xACBD;&#xBCC0;&#xC218; &#xC0AC;&#xC6A9;&#xC790; &#xC815;&#xC758; &#xC124;&#xC815;&#xD558;&#xAE30;</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li style=\"list-style-type:circle\"><p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:SFMono-Regular;font-size:10pt\">Basic Settings</span>&#xA0;&#xC601;&#xC5ED;</p>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>description &#xC785;&#xB825;, &#xBA54;&#xBAA8;&#xB9AC;&#xD560;&#xB2F9;, Timeout &#xC9C0;&#xC815;&#xD558;&#xAE30;</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li style=\"list-style-type:circle\"><p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:SFMono-Regular;font-size:10pt\">Network</span>&#xA0;&#xC601;&#xC5ED;</p>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>RDS&#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xB294; VPC, Subnets, Security Group &#xC9C0;&#xC815;&#xD558;&#xAE30;</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li><h2 style=\"font-family:Calibri;font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">AWS IAM</h2>\n\t\t\t\t<ul>\n\t\t\t\t\t<li style=\"list-style-type:circle\">Root&#xACC4;&#xC815; &#xC18C;&#xC720;&#xC790;&#xC5D0;&#xAC8C; IAM &#xC81C;&#xC5B4;&#xAD8C; &#xC694;&#xCCAD; or &#xC0DD;&#xC131;&#xD55C; Lambda Role Policy &#xBCC0;&#xACBD; &#xC694;&#xCCAD;</li>\n\t\t\t\t\t<li style=\"list-style-type:circle\"><p style=\"margin-top:0pt;margin-bottom:0pt\">&#xD574;&#xB2F9; Role&#xC5D0;&#xC11C;&#xA0;<span style=\"font-family:SFMono-Regular;font-size:10pt\">Attach Policy</span>&#xA0;&#xD574;&#xBCF4;&#xAE30;</p>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li style=\"font-family:Calibri\"><span lang=\"en-US\"><span style=\"font-weight:bold\">AmazonVPCReadOnlyAccess</span></span></li>\n\t\t\t\t\t\t<li style=\"font-family:Calibri\"><span lang=\"en-US\"><span style=\"font-weight:bold\">AWSLambdaVPCAccessExecutionRole</span></span></li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li><h2 data-tag=\"important\" style=\"font-family:Calibri;font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">AWS RDS Security Group</h2>\n\t\t\t\t<ul>\n\t\t\t\t\t<li style=\"list-style-type:circle\"><p style=\"margin-top:0pt;margin-bottom:0pt\">EC2&#xC758;&#xA0;<span style=\"font-family:SFMono-Regular;font-size:10pt\">Security Groups</span>&#xA0;&#xBA54;&#xB274;&#xC5D0;&#xC11C; RDS&#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xB294; Inbound rule &#xC138;&#xD305;&#xD558;&#xAE30;</p>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li><span lang=\"en-US\"><span style=\"font-weight:bold\">IP &#xB9D0;&#xACE0; Security group ID</span>&#xB97C; &#xC9C1;&#xC811; &#xC785;&#xB825;&#xD574;&#xC11C; &#xCD94;&#xAC00;&#xD558;&#xB3C4;&#xB85D;.</span></li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li><h2 lang=\"en-US\" style=\"font-family:Calibri;font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">AWS VPC (optional. <span style=\"font-family:Malgun Gothic\">&#xC548;&#xD574;&#xB3C4;</span> <span style=\"font-family:Malgun Gothic\">&#xC798;</span> <span style=\"font-family:Malgun Gothic\">&#xB3CC;&#xC544;&#xAC04;&#xB2E4;</span>.)</h2>\n\t\t\t\t<ul>\n\t\t\t\t\t<li style=\"list-style-type:circle\"><h3 lang=\"en-US\" style=\"font-family:Calibri;color:#377bac;margin-top:0pt;margin-bottom:0pt\">NAT Gateways</h3>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li><span lang=\"en-US\">Create Nat Gateway&#xB85C; subnet&#xC911; &#xD558;&#xB098; &#xACE8;&#xB77C;&#xC11C; <span style=\"font-weight:bold\">Elastic IP</span>&#xAC00; &#xC5C6;&#xB2E4;&#xBA74; &#xB9CC;&#xB4E0; &#xC774;&#xD6C4;&#xC5D0; NAT Gateway&#xB97C; &#xB9CC;&#xB4E0;&#xB2E4;.</span></li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li><h2 style=\"font-family:Calibri;font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">Amazon API Gateway</h2>\n\t\t\t\t<ul>\n\t\t\t\t\t<li style=\"list-style-type:circle\">API &#xCD94;&#xAC00;&#xD558;&#xAE30;</li>\n\t\t\t\t\t<li style=\"list-style-type:circle\">Resources &#xCD94;&#xAC00;&#xD558;&#xAE30;</li>\n\t\t\t\t\t<li style=\"list-style-type:circle\"><p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:SFMono-Regular;font-size:10pt\">Method Request</span></p>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>Authorization &#xC138;&#xD305; &#xBCC0;&#xACBD;&#xD558;&#xAE30;</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li style=\"list-style-type:circle\"><span style=\"font-family:SFMono-Regular;font-size:10pt\">TEST</span>&#xA0;&#xD574;&#xBCF4;&#xAE30;</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li><h2 style=\"font-family:Calibri;font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">Amazon CloudWatch</h2>\n\t\t\t\t<ul>\n\t\t\t\t\t<li style=\"list-style-type:circle\"><p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:SFMono-Regular;font-size:10pt\">Logs</span></p>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li><span style=\"font-family:SFMono-Regular;font-size:10pt\">Logs</span>&#xC5D0; &#xB4E4;&#xC5B4;&#xAC00; Lambda&#xC5D0;&#xC11C; &#xB0B4;&#xAC00; &#xB9CC;&#xB4E0; Role&#xC758; &#xC774;&#xB984;&#xC774; &#xACE7;&#xA0;<span style=\"font-family:SFMono-Regular;font-size:10pt\">Log groups</span>&#xC5D0; &#xC788;&#xC74C;</li>\n\t\t\t\t\t\t<li>API Gateway&#xC5D0;&#xC11C;&#xA0;<span style=\"font-family:SFMono-Regular;font-size:10pt\">TEST</span>&#xD55C; &#xC774;&#xD6C4;, Lambda function &#xC911; console.log()&#xB4F1;&#xC758; &#xC815;&#xBCF4;&#xC640; &#xC2DC;&#xC2A4;&#xD15C; &#xBA54;&#xC2DC;&#xC9C0;&#xB97C; &#xC774;&#xACF3;&#xC5D0;&#xC11C;<span lang=\"en-US\"> </span>&#xD655;&#xC778;&#xAC00;&#xB2A5;</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<h2 style=\"font-family:Calibri;font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">AWS IAM</h2>\n\t\t\t<h2 data-tag=\"important\" style=\"font-family:Calibri;font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">AWS RDS Security Group</h2>\n\t\t\t<h2 lang=\"en-US\" style=\"font-family:Calibri;font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">AWS VPC (optional. <span style=\"font-family:Malgun Gothic\">&#xC548;&#xD574;&#xB3C4;</span> <span style=\"font-family:Malgun Gothic\">&#xC798;</span> <span style=\"font-family:Malgun Gothic\">&#xB3CC;&#xC544;&#xAC04;&#xB2E4;</span>.)</h2>\n\t\t\t<h3 lang=\"en-US\" style=\"font-family:Calibri;color:#377bac;margin-top:0pt;margin-bottom:0pt\">NAT Gateways</h3>\n\t\t\t<h2 style=\"font-family:Calibri;font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">Amazon API Gateway</h2>\n\t\t\t<h2 style=\"font-family:Calibri;font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">Amazon CloudWatch</h2>\n\t\t\t<br>\n\t\t</div>\n\t\n\n"}}}