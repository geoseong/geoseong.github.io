{"pageContext":{"notebook":"Web Dev","section":"node.js","page":{"id":"0-a83b2fea67ff320915a52096006ec751!1-BC575AB8E2AB9833!1963","self":"https://www.onenote.com/api/v1.0/me/notes/pages/0-a83b2fea67ff320915a52096006ec751!1-BC575AB8E2AB9833!1963","createdTime":"2018-06-15T05:57:25.347Z","title":"Mysql : 동적 ? 파라미터 넣기","createdByAppId":"","links":{"oneNoteEmbedUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!1937&parId=BC575AB8E2AB9833!109&wd=target%28node.js.one%7C1ea34b4b-f4ea-b841-ba6b-444db5441a6a%2FMysql%20%20%EB%8F%99%EC%A0%81%20%20%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%20%EB%84%A3%EA%B8%B0%7C48963154-cc3e-c84d-a03c-f58bcc9ad10b%2F%29"},"oneNoteClientUrl":{"href":"onenote:https://d.docs.live.net/bc575ab8e2ab9833/Documents/Web%20Dev/node.js.one#Mysql%20%20%EB%8F%99%EC%A0%81%20%20%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%20%EB%84%A3%EA%B8%B0&section-id=1ea34b4b-f4ea-b841-ba6b-444db5441a6a&page-id=48963154-cc3e-c84d-a03c-f58bcc9ad10b&end"},"oneNoteWebUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!1937&parId=BC575AB8E2AB9833!109&wd=target%28node.js.one%7C1ea34b4b-f4ea-b841-ba6b-444db5441a6a%2FMysql%20%20%EB%8F%99%EC%A0%81%20%20%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%20%EB%84%A3%EA%B8%B0%7C48963154-cc3e-c84d-a03c-f58bcc9ad10b%2F%29"}},"contentUrl":"https://www.onenote.com/api/v1.0/me/notes/pages/0-a83b2fea67ff320915a52096006ec751!1-BC575AB8E2AB9833!1963/content","lastModifiedTime":"2019-01-08T05:09:51Z","parentSection@odata.context":"https://www.onenote.com/api/v1.0/$metadata#me/notes/sections('0-BC575AB8E2AB9833%211963')/pages('0-a83b2fea67ff320915a52096006ec751%211-BC575AB8E2AB9833%211963')/parentSection(id,name,self)/$entity","parentSection":{"id":"0-BC575AB8E2AB9833!1963","name":"node.js","self":"https://www.onenote.com/api/v1.0/me/notes/sections/0-BC575AB8E2AB9833!1963"},"content":"       Where in ('1', '2', …)를 대체할만한 것    FIND_IN_SET    FIND_IN_SET(컬럼, '조건1,조건2,….')    조건 넣는 곳에 공백이 있으면 조건들에 다 걸리지 않는다.        구문 예제               UPDATE projhub.PROJHUB_DOMAIN_ROLE AS ORI       SET       ORI.USAGE_CNT = 0      WHERE       CASE. FIND_IN_SET(ORI.ROLE_NAME, '안전,직원,직영,해체')                           멀티 row를 insert할때.     기존에는    INSERT [TBL] VALUES ('proj-1', '미장', '1'), ('proj-1', '보인', '1'), ...        이제는 이렇게               var sql = \"INSERT INTO Test (name, email, n) VALUES ?\";      var values = [          ['proj-1', '미장', 1],          ['proj-1', '보인', 1]      ];      conn.query(sql, [values], function(err) {          if (err) throw err;          conn.end();      });                       데이터 존재안하면 insert, 존재하면 update    INSERT INTO [TBL] (COLUMN1, COLUMN2, …) VALUES ?    ON DUPLICATE KEY     UPDATE …    쿼리    : 존재한다면 기존에 있던 ITEM_SUM 숫자에다가 새로 삽입할 숫자를 더한다.               INSERT INTO projhub.PROJHUB_MGMT_ITEM_SUM          (PROJ_ID, COMPANY_NAME, CONSTRUCT_NAME, ITEM_NAME, TYPE, ITEM_SUM)       VALUES           ?      ON DUPLICATE KEY UPDATE ITEM_SUM = ITEM_SUM + VALUES(ITEM_SUM)                   ? 에 들어갈 파라미터               [          ['proj-1', '아이디어샘', '창소프트', '개발자', 'O', '2'],          ['proj-1', '아이디어샘', '창소프트', '기획자', 'O', '12'],          ['proj-1', '아이디어샘', '창소프트', '대표이사', 'O', '1']      ]                      ","html":"\n\t\t<div style=\"position:absolute;left:48px;top:139px;width:576px\">\n\t\t\t<h1 style=\"font-size:16pt;color:#1e4e79;margin-top:0pt;margin-bottom:0pt\">Where in (&apos;1&apos;, &apos;2&apos;, &#x2026;)<span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xB97C;</span> <span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xB300;&#xCCB4;&#xD560;&#xB9CC;&#xD55C;</span> <span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xAC83;</span></h1>\n\t\t\t<h2 style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">FIND_IN_SET</h2>\n\t\t\t<p data-tag=\"remember-for-later\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic;font-weight:bold\">FIND_IN_SET(</span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic;font-weight:bold\">&#xCEEC;&#xB7FC;</span><span style=\"font-family:Malgun Gothic;font-weight:bold\">, &apos;</span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic;font-weight:bold\">&#xC870;&#xAC74;</span><span style=\"font-family:Malgun Gothic;font-weight:bold\">1,</span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic;font-weight:bold\">&#xC870;&#xAC74;</span><span style=\"font-family:Malgun Gothic;font-weight:bold\">2,</span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic;font-weight:bold\">&#x2026;</span><span style=\"font-family:Malgun Gothic;font-weight:bold\">.&apos;)</span></p>\n\t\t\t<p lang=\"ko-KR\" data-tag=\"highlight\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xC870;&#xAC74;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> </span><span style=\"font-family:Malgun Gothic\">&#xB123;&#xB294;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> </span><span style=\"font-family:Malgun Gothic\">&#xACF3;&#xC5D0;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> </span><span style=\"font-family:Malgun Gothic\">&#xACF5;&#xBC31;&#xC774;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> </span><span style=\"font-family:Malgun Gothic\">&#xC788;&#xC73C;&#xBA74;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> </span><span style=\"font-family:Malgun Gothic\">&#xC870;&#xAC74;&#xB4E4;&#xC5D0;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> </span><span style=\"font-family:Malgun Gothic\">&#xB2E4;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> </span><span style=\"font-family:Malgun Gothic\">&#xAC78;&#xB9AC;&#xC9C0;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> </span><span style=\"font-family:Malgun Gothic\">&#xC54A;&#xB294;&#xB2E4;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\">.</span></p>\n\t\t\t<br>\n\t\t\t<h2 lang=\"ko-KR\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xAD6C;&#xBB38;</span><span lang=\"en-US\"> </span><span style=\"font-family:Malgun Gothic\">&#xC608;&#xC81C;</span></h2>\n\t\t\t<table style=\"border:1px solid;border-collapse:collapse\">\n\t\t\t\t<tbody><tr>\n\t\t\t\t\t<td style=\"background-color:#f2f2f2;border:1px solid\"><p style=\"margin-top:0pt;margin-bottom:0pt\">UPDATE projhub.PROJHUB_DOMAIN_ROLE AS ORI </p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">SET </p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">ORI.USAGE_CNT = 0</p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">WHERE </p>\n\t\t\t\t\t<p data-tag=\"highlight\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"color:#0432ff;font-weight:bold\">CASE.</span> FIND_IN_SET(ORI.ROLE_NAME, &apos;<span style=\"font-family:Malgun Gothic\">&#xC548;&#xC804;</span>,<span style=\"font-family:Malgun Gothic\">&#xC9C1;&#xC6D0;</span>,<span style=\"font-family:Malgun Gothic\">&#xC9C1;&#xC601;</span>,<span style=\"font-family:Malgun Gothic\">&#xD574;&#xCCB4;</span>&apos;)</p>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody></table>\n\t\t\t<br>\n\t\t\t<br>\n\t\t\t<h1 lang=\"ko-KR\" style=\"font-size:16pt;color:#1e4e79;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xBA40;&#xD2F0;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> row</span><span style=\"font-family:Malgun Gothic\">&#xB97C;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> insert</span><span style=\"font-family:Malgun Gothic\">&#xD560;&#xB54C;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\">. </span></h1>\n\t\t\t<h2 lang=\"ko-KR\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xAE30;&#xC874;&#xC5D0;&#xB294;</span></h2>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">INSERT [TBL] VALUES </span><span lang=\"ko-KR\" style=\"font-family:Menlo;font-size:9pt;color:#cb8f76\">(&apos;proj-1&apos;, &apos;</span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic;font-size:9pt;color:#cb8f76\">&#xBBF8;&#xC7A5;</span><span lang=\"ko-KR\" style=\"font-family:Menlo;font-size:9pt;color:#cb8f76\">&apos;, &apos;1&apos;), (&apos;proj-1&apos;, &apos;</span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic;font-size:9pt;color:#cb8f76\">&#xBCF4;&#xC778;</span><span lang=\"ko-KR\" style=\"font-family:Menlo;font-size:9pt;color:#cb8f76\">&apos;, &apos;1&apos;), </span><span style=\"font-family:Menlo;font-size:9pt;color:#cb8f76\">...</span></p>\n\t\t\t<br>\n\t\t\t<h2 lang=\"ko-KR\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xC774;&#xC81C;&#xB294;</span><span lang=\"en-US\"> </span><span style=\"font-family:Malgun Gothic\">&#xC774;&#xB807;&#xAC8C;</span></h2>\n\t\t\t<table style=\"border:1px solid;border-collapse:collapse\">\n\t\t\t\t<tbody><tr>\n\t\t\t\t\t<td style=\"background-color:#f2f2f2;border:1px solid\"><p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">var sql = &quot;INSERT INTO Test (name, email, n) VALUES ?&quot;;</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">var values = [</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    [&apos;proj-1&apos;, &apos;<span style=\"font-family:Malgun Gothic\">&#xBBF8;&#xC7A5;</span>&apos;, 1],</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    [&apos;proj-1&apos;, &apos;<span style=\"font-family:Malgun Gothic\">&#xBCF4;&#xC778;</span>&apos;, 1]</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">];</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">conn.query(sql, [values], function(err) {</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    if (err) throw err;</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    conn.end();</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">});</p>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody></table>\n\t\t\t<br>\n\t\t\t<h1 lang=\"ko-KR\" style=\"font-size:16pt;color:#1e4e79;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xB370;&#xC774;&#xD130;</span><span lang=\"en-US\"> </span><span style=\"font-family:Malgun Gothic\">&#xC874;&#xC7AC;&#xC548;&#xD558;&#xBA74;</span><span lang=\"en-US\"> insert, </span><span style=\"font-family:Malgun Gothic\">&#xC874;&#xC7AC;&#xD558;&#xBA74;</span><span lang=\"en-US\"> update</span></h1>\n\t\t\t<p data-tag=\"remember-for-later\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-weight:bold\">INSERT INTO [TBL] (COLUMN1, COLUMN2, &#x2026;) VALUES ?</span></p>\n\t\t\t<p data-tag=\"remember-for-later\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-weight:bold\">ON DUPLICATE KEY </span></p>\n\t\t\t<p data-tag=\"remember-for-later\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-weight:bold\">UPDATE &#x2026;</span></p>\n\t\t\t<h2 lang=\"ko-KR\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xCFFC;&#xB9AC;</span></h2>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">: </span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xC874;&#xC7AC;&#xD55C;&#xB2E4;&#xBA74;</span><span style=\"font-family:Malgun Gothic\"> </span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xAE30;&#xC874;&#xC5D0;</span><span style=\"font-family:Malgun Gothic\"> </span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xC788;&#xB358;</span><span style=\"font-family:Malgun Gothic\"> ITEM_SUM </span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xC22B;&#xC790;&#xC5D0;&#xB2E4;&#xAC00;</span><span style=\"font-family:Malgun Gothic\"> </span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xC0C8;&#xB85C;</span><span style=\"font-family:Malgun Gothic\"> </span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xC0BD;&#xC785;&#xD560;</span><span style=\"font-family:Malgun Gothic\"> </span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xC22B;&#xC790;&#xB97C;</span><span style=\"font-family:Malgun Gothic\"> </span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xB354;&#xD55C;&#xB2E4;</span><span style=\"font-family:Malgun Gothic\">.</span></p>\n\t\t\t<table style=\"border:1px solid;border-collapse:collapse\">\n\t\t\t\t<tbody><tr>\n\t\t\t\t\t<td style=\"background-color:#f2f2f2;border:1px solid\"><p style=\"margin-top:0pt;margin-bottom:0pt\">INSERT INTO projhub.PROJHUB_MGMT_ITEM_SUM</p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">    (PROJ_ID, COMPANY_NAME, CONSTRUCT_NAME, ITEM_NAME, TYPE, ITEM_SUM) </p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">VALUES </p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">    ?</p>\n\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">ON DUPLICATE KEY UPDATE ITEM_SUM = ITEM_SUM + VALUES(ITEM_SUM)</p>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody></table>\n\t\t\t<h2 style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">? <span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xC5D0;</span> <span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xB4E4;&#xC5B4;&#xAC08;</span> <span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xD30C;&#xB77C;&#xBBF8;&#xD130;</span></h2>\n\t\t\t<table style=\"border:1px solid;border-collapse:collapse\">\n\t\t\t\t<tbody><tr>\n\t\t\t\t\t<td style=\"background-color:#f2f2f2;border:1px solid\"><p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">[</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    [&apos;proj-1&apos;, &apos;<span style=\"font-family:Malgun Gothic\">&#xC544;&#xC774;&#xB514;&#xC5B4;&#xC0D8;</span>&apos;, &apos;<span style=\"font-family:Malgun Gothic\">&#xCC3D;&#xC18C;&#xD504;&#xD2B8;</span>&apos;, &apos;<span style=\"font-family:Malgun Gothic\">&#xAC1C;&#xBC1C;&#xC790;</span>&apos;, &apos;O&apos;, &apos;2&apos;],</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    [&apos;proj-1&apos;, &apos;<span style=\"font-family:Malgun Gothic\">&#xC544;&#xC774;&#xB514;&#xC5B4;&#xC0D8;</span>&apos;, &apos;<span style=\"font-family:Malgun Gothic\">&#xCC3D;&#xC18C;&#xD504;&#xD2B8;</span>&apos;, &apos;<span style=\"font-family:Malgun Gothic\">&#xAE30;&#xD68D;&#xC790;</span>&apos;, &apos;O&apos;, &apos;12&apos;],</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    [&apos;proj-1&apos;, &apos;<span style=\"font-family:Malgun Gothic\">&#xC544;&#xC774;&#xB514;&#xC5B4;&#xC0D8;</span>&apos;, &apos;<span style=\"font-family:Malgun Gothic\">&#xCC3D;&#xC18C;&#xD504;&#xD2B8;</span>&apos;, &apos;<span style=\"font-family:Malgun Gothic\">&#xB300;&#xD45C;&#xC774;&#xC0AC;</span>&apos;, &apos;O&apos;, &apos;1&apos;]</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">]</p>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody></table>\n\t\t</div>\n\t\n\n"}}}