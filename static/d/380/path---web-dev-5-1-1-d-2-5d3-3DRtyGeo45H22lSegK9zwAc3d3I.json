{"pageContext":{"isCreatedByStatefulCreatePages":false,"notebook":"Web Dev","section":"Docker","page":{"id":"0-dfeded4cd54809499e5308e0b8003021!1-BC575AB8E2AB9833!2141","self":"https://www.onenote.com/api/v1.0/me/notes/pages/0-dfeded4cd54809499e5308e0b8003021!1-BC575AB8E2AB9833!2141","createdTime":"2019-01-03T14:48:45.033Z","title":"Docker compose: .env의 쓰임","createdByAppId":"","links":{"oneNoteEmbedUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!1937&parId=BC575AB8E2AB9833!109&wd=target%28Docker.one%7Cc134cdbf-f311-3945-bbdb-f8eecc1a6d52%2FDocker%20compose%20.env%EC%9D%98%20%EC%93%B0%EC%9E%84%7C87b5b228-4313-6a4e-b517-48b07a3d72d9%2F%29"},"oneNoteClientUrl":{"href":"onenote:https://d.docs.live.net/bc575ab8e2ab9833/Documents/Web%20Dev/Docker.one#Docker%20compose%20.env%EC%9D%98%20%EC%93%B0%EC%9E%84&section-id=c134cdbf-f311-3945-bbdb-f8eecc1a6d52&page-id=87b5b228-4313-6a4e-b517-48b07a3d72d9&end"},"oneNoteWebUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!1937&parId=BC575AB8E2AB9833!109&wd=target%28Docker.one%7Cc134cdbf-f311-3945-bbdb-f8eecc1a6d52%2FDocker%20compose%20.env%EC%9D%98%20%EC%93%B0%EC%9E%84%7C87b5b228-4313-6a4e-b517-48b07a3d72d9%2F%29"}},"contentUrl":"https://www.onenote.com/api/v1.0/me/notes/pages/0-dfeded4cd54809499e5308e0b8003021!1-BC575AB8E2AB9833!2141/content","lastModifiedTime":"2019-01-03T16:14:41Z","parentSection@odata.context":"https://www.onenote.com/api/v1.0/$metadata#me/notes/sections('0-BC575AB8E2AB9833%212141')/pages('0-dfeded4cd54809499e5308e0b8003021%211-BC575AB8E2AB9833%212141')/parentSection(id,name,self)/$entity","parentSection":{"id":"0-BC575AB8E2AB9833!2141","name":"Docker","self":"https://www.onenote.com/api/v1.0/me/notes/sections/0-BC575AB8E2AB9833!2141"},"content":"       Docker Compose에서 환경변수 사용하기    Document: Environment variables in Compose        환경변수들을 모아놓은 env파일을 따로 만들고 참조하게 하는 방법         .env파일 참조는 docker-compose up 명령에서만 작동된다.                  web:￼  env_file:￼    - web-variables.env                       Variable Substitution을 이용한 방법               web:￼  image: \"webapp:${TAG}\"                 Variable Substitution을 이용한 Advance한 방법: 인라인 기본값 설정하기 1         Document: Variable Substitution     예제설명:           PRISMA_DB_CONNECTOR의 값이 빈 값이거나 unset상태라면 기본 값을 'mysql'로 지정한다.                            databases:         default:           connector: ${PRISMA_DB_CONNECTOR:-mysql}                              Variable Substitution을 이용한 Advance한 방법: 인라인 기본값 설정하기 2         Document: Variable Substitution     예제설명:           PRISMA_DB_CONNECTOR변수가 unset상태일때 기본 값을 'mysql'로 지정한다. 이 케이스는 빈 값일 때에는 그냥 빈 값인 상태로 지정되므로 주의                            databases:         default:           connector: ${PRISMA_DB_CONNECTOR-mysql}                              나머지 해석과 완성은 나중에...    Similarly, the following syntax allows you to specify mandatory variables:         ${VARIABLE:?err} exits with an error message containing err if VARIABLE is unset or empty in the environment.     ${VARIABLE?err} exits with an error message containing err if VARIABLE is unset in the environment.        Other extended shell-style features, such as ${VARIABLE/foo/bar}, are not supported.        You can use a $$ (double-dollar sign) when your configuration needs a literal dollar sign. This also prevents Compose from interpolating a value, so a $$ allows you to refer to environment variables that you don’t want processed by Compose.    web:￼  build: .￼  command: \"$$VAR_NOT_INTERPOLATED_BY_COMPOSE\"￼    If you forget and use a single dollar sign ($), Compose interprets the value as an environment variable and warns you:    The VAR_NOT_INTERPOLATED_BY_COMPOSE is not set. Substituting an empty string.       ","html":"\n\t\t<div style=\"position:absolute;left:52px;top:125px;width:572px\">\n\t\t\t<h1 style=\"font-size:16pt;color:#1e4e79;margin-top:0pt;margin-bottom:0pt\">Docker Compose<span style=\"font-family:Malgun Gothic\">&#xC5D0;&#xC11C;</span> <span style=\"font-family:Malgun Gothic\">&#xD658;&#xACBD;&#xBCC0;&#xC218;</span> <span style=\"font-family:Malgun Gothic\">&#xC0AC;&#xC6A9;&#xD558;&#xAE30;</span></h1>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">Document: <a href=\"https://docs.docker.com/compose/environment-variables/#the-env-file\">Environment variables in Compose</a></p>\n\t\t\t<br>\n\t\t\t<h3 style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xD658;&#xACBD;&#xBCC0;&#xC218;&#xB4E4;&#xC744;</span> <span style=\"font-family:Malgun Gothic\">&#xBAA8;&#xC544;&#xB193;&#xC740;</span> env<span style=\"font-family:Malgun Gothic\">&#xD30C;&#xC77C;&#xC744;</span> <span style=\"font-family:Malgun Gothic\">&#xB530;&#xB85C;</span> <span style=\"font-family:Malgun Gothic\">&#xB9CC;&#xB4E4;&#xACE0;</span> <span style=\"font-family:Malgun Gothic\">&#xCC38;&#xC870;&#xD558;&#xAC8C;</span> <span style=\"font-family:Malgun Gothic\">&#xD558;&#xB294;</span> <span style=\"font-family:Malgun Gothic\">&#xBC29;&#xBC95;</span></h3>\n\t\t\t<ul>\n\t\t\t\t<li style=\"list-style-type:circle\">.env<span style=\"font-family:Malgun Gothic\">&#xD30C;&#xC77C; &#xCC38;&#xC870;&#xB294;</span> <span style=\"background-color:silver\">docker-compose up</span> <span style=\"font-family:Malgun Gothic\">&#xBA85;&#xB839;&#xC5D0;&#xC11C;&#xB9CC; &#xC791;&#xB3D9;&#xB41C;&#xB2E4;</span>.</li>\n\t\t\t\t<table style=\"border:1px solid;border-collapse:collapse\">\n\t\t\t\t\t<tbody><tr>\n\t\t\t\t\t\t<td style=\"background-color:#f2f2f2;border:1px solid\"><span lang=\"ko-KR\"><span style=\"font-family:Menlo;color:#658b00\">web</span><span style=\"font-family:Menlo\">:</span><span style=\"font-family:Menlo\">&#xFFFC;</span><span style=\"font-family:Menlo\">  </span><span style=\"font-family:Menlo;color:#658b00\">env_file</span><span style=\"font-family:Menlo\">:</span><span style=\"font-family:Menlo\">&#xFFFC;</span><span style=\"font-family:Menlo\">    - </span><span style=\"font-family:Menlo;color:#cd5555\">web-variables.env</span></span></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</ul>\n\t\t\t<br>\n\t\t\t<h3 style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\">Variable Substitution<span style=\"font-family:Malgun Gothic\">&#xC744;</span> <span style=\"font-family:Malgun Gothic\">&#xC774;&#xC6A9;&#xD55C;</span> <span style=\"font-family:Malgun Gothic\">&#xBC29;&#xBC95;</span></h3>\n\t\t\t<table style=\"border:1px solid;border-collapse:collapse\">\n\t\t\t\t<tbody><tr>\n\t\t\t\t\t<td style=\"background-color:#f2f2f2;border:1px solid\"><span lang=\"ko-KR\"><span style=\"font-family:Menlo;color:#658b00\">web</span><span style=\"font-family:Menlo\">:</span><span style=\"font-family:Menlo\">&#xFFFC;</span><span style=\"font-family:Menlo\">  </span><span style=\"font-family:Menlo;color:#658b00\">image</span><span style=\"font-family:Menlo\">: </span><span style=\"font-family:Menlo;color:#cd5555\">&quot;webapp:${TAG}&quot;</span></span></td>\n\t\t\t\t</tr>\n\t\t\t</tbody></table>\n\t\t\t<br>\n\t\t\t<h3 style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\">Variable Substitution<span style=\"font-family:Malgun Gothic\">&#xC744; &#xC774;&#xC6A9;&#xD55C;</span> Advance<span style=\"font-family:Malgun Gothic\">&#xD55C; &#xBC29;&#xBC95;: &#xC778;&#xB77C;&#xC778; &#xAE30;&#xBCF8;&#xAC12; &#xC124;&#xC815;&#xD558;&#xAE30; 1</span></h3>\n\t\t\t<ul>\n\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">Document: <a href=\"https://docs.docker.com/compose/compose-file/#variable-substitution\">Variable Substitution</a></p>\n\t\t\t\t<li><p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xC608;&#xC81C;&#xC124;&#xBA85;</span>:</p>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>PRISMA_DB_CONNECTOR<span style=\"font-family:Malgun Gothic\">&#xC758; &#xAC12;&#xC774; &#xBE48; &#xAC12;&#xC774;&#xAC70;&#xB098; unset&#xC0C1;&#xD0DC;&#xB77C;&#xBA74; &#xAE30;&#xBCF8; &#xAC12;&#xC744;</span> &apos;mysql&apos;<span style=\"font-family:Malgun Gothic\">&#xB85C; &#xC9C0;&#xC815;&#xD55C;&#xB2E4;.</span></li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<table style=\"border:1px solid;border-collapse:collapse\">\n\t\t\t\t\t<tbody><tr>\n\t\t\t\t\t\t<td style=\"background-color:#f2f2f2;border:1px solid\"><p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;color:#569cd6\">databases</span><span lang=\"en-US\" style=\"font-family:D2Coding;color:#979797\">:</span></p>\n\t\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;color:#569cd6\">  </span><span lang=\"ko-KR\" style=\"font-family:D2Coding;color:#569cd6\">default</span><span style=\"font-family:D2Coding;color:#979797\">:</span></p>\n\t\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;color:#569cd6\">    </span><span lang=\"ko-KR\" style=\"font-family:D2Coding;color:#569cd6\">connector</span><span style=\"font-family:D2Coding;color:#979797\">: </span><span style=\"font-family:D2Coding;color:#cb8f76\">${PRISMA_DB_CONNECTOR:-mysql}</span></p>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</ul>\n\t\t\t<br>\n\t\t\t<h3 style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\">Variable Substitution<span style=\"font-family:Malgun Gothic\">&#xC744; &#xC774;&#xC6A9;&#xD55C;</span> Advance<span style=\"font-family:Malgun Gothic\">&#xD55C; &#xBC29;&#xBC95;: &#xC778;&#xB77C;&#xC778; &#xAE30;&#xBCF8;&#xAC12; &#xC124;&#xC815;&#xD558;&#xAE30; 2</span></h3>\n\t\t\t<ul>\n\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">Document: <a href=\"https://docs.docker.com/compose/compose-file/#variable-substitution\">Variable Substitution</a></p>\n\t\t\t\t<li><p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xC608;&#xC81C;&#xC124;&#xBA85;</span>:</p>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>PRISMA_DB_CONNECTOR<span style=\"font-family:Malgun Gothic\">&#xBCC0;&#xC218;&#xAC00; unset&#xC0C1;&#xD0DC;&#xC77C;&#xB54C; &#xAE30;&#xBCF8; &#xAC12;&#xC744;</span> &apos;mysql&apos;<span style=\"font-family:Malgun Gothic\">&#xB85C; &#xC9C0;&#xC815;&#xD55C;&#xB2E4;. &#xC774; &#xCF00;&#xC774;&#xC2A4;&#xB294; &#xBE48; &#xAC12;&#xC77C; &#xB54C;&#xC5D0;&#xB294; &#xADF8;&#xB0E5; &#xBE48; &#xAC12;&#xC778; &#xC0C1;&#xD0DC;&#xB85C; &#xC9C0;&#xC815;&#xB418;&#xBBC0;&#xB85C; &#xC8FC;&#xC758;</span></li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<table style=\"border:1px solid;border-collapse:collapse\">\n\t\t\t\t\t<tbody><tr>\n\t\t\t\t\t\t<td style=\"background-color:#f2f2f2;border:1px solid\"><p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;color:#569cd6\">databases</span><span lang=\"en-US\" style=\"font-family:D2Coding;color:#979797\">:</span></p>\n\t\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;color:#569cd6\">  </span><span lang=\"ko-KR\" style=\"font-family:D2Coding;color:#569cd6\">default</span><span style=\"font-family:D2Coding;color:#979797\">:</span></p>\n\t\t\t\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;color:#569cd6\">    </span><span lang=\"ko-KR\" style=\"font-family:D2Coding;color:#569cd6\">connector</span><span style=\"font-family:D2Coding;color:#979797\">: </span><span style=\"font-family:D2Coding;color:#cb8f76\">${PRISMA_DB_CONNECTOR-mysql}</span></p>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</ul>\n\t\t\t<br>\n\t\t\t<h3 lang=\"ko-KR\" style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xB098;&#xBA38;&#xC9C0;</span> <span style=\"font-family:Malgun Gothic\">&#xD574;&#xC11D;&#xACFC;</span> <span style=\"font-family:Malgun Gothic\">&#xC644;&#xC131;&#xC740;</span> <span style=\"font-family:Malgun Gothic\">&#xB098;&#xC911;&#xC5D0;</span><span lang=\"en-US\">...</span></h3>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:7.5pt;margin-bottom:7.5pt\"><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">Similarly, the following syntax allows you to specify mandatory variables:</span></p>\n\t\t\t<ul>\n\t\t\t\t<li><span lang=\"ko-KR\"><span style=\"font-family:Open Sans;font-size:10.5pt;color:#0c5176;background-color:white\">${VARIABLE:?err}</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">&#xA0;exits with an error message containing&#xA0;</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#0c5176;background-color:white\">err</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">&#xA0;if&#xA0;</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#0c5176;background-color:white\">VARIABLE</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">&#xA0;is unset or empty in the environment.</span></span></li>\n\t\t\t\t<li><span lang=\"ko-KR\"><span style=\"font-family:Open Sans;font-size:10.5pt;color:#0c5176;background-color:white\">${VARIABLE?err}</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">&#xA0;exits with an error message containing&#xA0;</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#0c5176;background-color:white\">err</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">&#xA0;if&#xA0;</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#0c5176;background-color:white\">VARIABLE</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">&#xA0;is unset in the environment.</span></span></li>\n\t\t\t</ul>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:7.5pt;margin-bottom:7.5pt\"><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">Other extended shell-style features, such as&#xA0;</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#0c5176;background-color:white\">${VARIABLE/foo/bar}</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">, are not supported.</span></p>\n\t\t\t<br>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:7.5pt;margin-bottom:7.5pt\"><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">You can use a&#xA0;</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#0c5176;background-color:white\">$$</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">&#xA0;(double-dollar sign) when your configuration needs a literal dollar sign. This also prevents Compose from interpolating a value, so a&#xA0;</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#0c5176;background-color:white\">$$</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">&#xA0;allows you to refer to environment variables that you don&#x2019;t want processed by Compose.</span></p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Menlo;font-size:10.5pt;color:#33444c\">web:</span><span style=\"font-family:Menlo;font-size:10.5pt;color:#33444c\">&#xFFFC;</span><span style=\"font-family:Menlo;font-size:10.5pt;color:#33444c\">  build: .</span><span style=\"font-family:Menlo;font-size:10.5pt;color:#33444c\">&#xFFFC;</span><span style=\"font-family:Menlo;font-size:10.5pt;color:#33444c\">  command: &quot;$$VAR_NOT_INTERPOLATED_BY_COMPOSE&quot;</span><span style=\"font-family:Menlo;font-size:10.5pt;color:#33444c\">&#xFFFC;</span></p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:7.5pt;margin-bottom:7.5pt\"><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">If you forget and use a single dollar sign (</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#0c5176;background-color:white\">$</span><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">), Compose interprets the value as an environment variable and warns you:</span></p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:7.5pt;margin-bottom:7.5pt\"><span style=\"font-family:Open Sans;font-size:10.5pt;color:#33444c;background-color:white\">The VAR_NOT_INTERPOLATED_BY_COMPOSE is not set. Substituting an empty string.</span></p>\n\t\t</div>\n\t\n\n"}}}