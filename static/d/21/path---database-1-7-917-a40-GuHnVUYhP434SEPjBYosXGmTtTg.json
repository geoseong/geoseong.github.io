{"pageContext":{"isCreatedByStatefulCreatePages":false,"notebook":"Database","section":"mongoDB","page":{"id":"0-e64b2d15b9d6a440af02a14edae3f4cd!1-BC575AB8E2AB9833!2166","self":"https://www.onenote.com/api/v1.0/me/notes/pages/0-e64b2d15b9d6a440af02a14edae3f4cd!1-BC575AB8E2AB9833!2166","createdTime":"2017-07-09T09:07:24.891Z","title":"mongoDB서비스시작 & 명령어들.","createdByAppId":"","links":{"oneNoteEmbedUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!2160&parId=BC575AB8E2AB9833!109&wd=target%28mongoDB.one%7C274f6f60-9b2c-084b-8214-51539d991fda%2FmongoDB%EC%84%9C%EB%B9%84%EC%8A%A4%EC%8B%9C%EC%9E%91%20%20%EB%AA%85%EB%A0%B9%EC%96%B4%EB%93%A4.%7Cdd793445-f326-c84b-8922-c6fbe91e54e9%2F%29"},"oneNoteClientUrl":{"href":"onenote:https://d.docs.live.net/bc575ab8e2ab9833/Documents/Database/mongoDB.one#mongoDB%EC%84%9C%EB%B9%84%EC%8A%A4%EC%8B%9C%EC%9E%91%20%20%EB%AA%85%EB%A0%B9%EC%96%B4%EB%93%A4.&section-id=274f6f60-9b2c-084b-8214-51539d991fda&page-id=dd793445-f326-c84b-8922-c6fbe91e54e9&end"},"oneNoteWebUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!2160&parId=BC575AB8E2AB9833!109&wd=target%28mongoDB.one%7C274f6f60-9b2c-084b-8214-51539d991fda%2FmongoDB%EC%84%9C%EB%B9%84%EC%8A%A4%EC%8B%9C%EC%9E%91%20%20%EB%AA%85%EB%A0%B9%EC%96%B4%EB%93%A4.%7Cdd793445-f326-c84b-8922-c6fbe91e54e9%2F%29"}},"contentUrl":"https://www.onenote.com/api/v1.0/me/notes/pages/0-e64b2d15b9d6a440af02a14edae3f4cd!1-BC575AB8E2AB9833!2166/content","lastModifiedTime":"2018-01-18T05:19:15Z","parentSection@odata.context":"https://www.onenote.com/api/v1.0/$metadata#me/notes/sections('0-BC575AB8E2AB9833%212166')/pages('0-e64b2d15b9d6a440af02a14edae3f4cd%211-BC575AB8E2AB9833%212166')/parentSection(id,name,self)/$entity","parentSection":{"id":"0-BC575AB8E2AB9833!2166","name":"mongoDB","self":"https://www.onenote.com/api/v1.0/me/notes/sections/0-BC575AB8E2AB9833!2166"},"content":"       http://www.tutorialbook.co.kr/entry/MongoDB-%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%9D%B8%EC%A6%9D-authorization-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0        mongoDB 서비스 시작(mongod 쉘)    mongod --dbpath /data/db (mongo 쉘 열때 사용자인증 필요없음)    mongod --auth --dbpath /data/db (mongo 쉘 열때 사용자인증시키기)        Mongo 쉘 서비스 시작    mongo localhost -u admin -p 1234 --authenticationDatabase admin --authenticationMechanism SCRAM-SHA-1    mongo -u smartbed -p ideasam --authenticationDatabase smartbed --authenticationMechanism SCRAM-SHA-1        mongo --port 27017 -u admin -p 1234 --authenticationDatabase admin    mongo --port 27017 -u smartbed -p ideasam --authenticationDatabase smartbed         mongoDB Path (안쓰이는것 같음)    dbPath: /usr/local/var/mongodb    Actual dbPath : /data/db    (Maybe)application path : /usr/local/bin        Mongod.conf 경로    /usr/local/etc        Mongod.conf 수정    이 설정 적용하면 사용자 인증해야 Collection 볼 수 있음.    security:       authorization: enabled        db상태 확인하기    > db.stats()    {    \"ok\" : 0,    \"errmsg\" : \"not authorized on test to execute command { dbstats: 1.0, scale: undefined }\",    \"code\" : 13,    \"codeName\" : \"Unauthorized\"    }        사용자 교체    > db.auth(\"smartbed\",\"ideasam\")    1        사용자 권한주기    db.grantRolesToUser(\"admin\",[\"readWrite\"])        db.grantRolesToUser(\"smartbed\",[\"readAnyDatabase\"])    Error: No role named dbAdminAnyDatabase@smartbed    https://groups.google.com/forum/#!topic/mongodb-dev/z5Rm0YihF8E    일반 user에는 부여할 수 없는 role인 것이다..        사용자 정보 보기    > db.getUser(\"smartbed\")    {    \"_id\" : \"smartbed.smartbed\",    \"user\" : \"smartbed\",    \"db\" : \"smartbed\",    \"roles\" : [    {    \"role\" : \"readWrite\",    \"db\" : \"smartbed\"    }    ]    }        보아하니..    Show users, show dbs, show collections에 대한 각 권한이 있는듯.    Privileges 페이지 참조       ","html":"\n\t\t<div style=\"position:absolute;left:48px;top:139px;width:576px\">\n\t\t\t<p lang=\"en-US\" style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"http://www.tutorialbook.co.kr/entry/MongoDB-%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%9D%B8%EC%A6%9D-authorization-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\">http://www.tutorialbook.co.kr/entry/MongoDB-%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%9D%B8%EC%A6%9D-authorization-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0</a></p>\n\t\t\t<br>\n\t\t\t<h2 lang=\"en-US\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">mongoDB &#xC11C;&#xBE44;&#xC2A4; &#xC2DC;&#xC791;(mongod <span lang=\"ko-KR\">&#xC258;</span>)</h2>\n\t\t\t<p lang=\"en-US\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-size:9pt;color:#454545;font-weight:bold\">mongod --dbpath /data/db </span><span style=\"font-size:9pt;color:#70ad47;font-weight:bold\">(mongo </span><span style=\"font-size:9pt;color:#70ad47;font-weight:bold\">&#xC258; &#xC5F4;&#xB54C; &#xC0AC;&#xC6A9;&#xC790;&#xC778;&#xC99D;</span><span style=\"font-size:9pt;color:#70ad47;font-weight:bold\"> </span><span style=\"font-size:9pt;color:#70ad47;font-weight:bold\">&#xD544;&#xC694;&#xC5C6;&#xC74C;</span><span style=\"font-size:9pt;color:#70ad47;font-weight:bold\">)</span></p>\n\t\t\t<p lang=\"en-US\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-size:9pt;color:#454545;font-weight:bold\">mongod --auth --dbpath /data/db </span><span style=\"font-size:9pt;color:#70ad47;font-weight:bold\">(mongo </span><span style=\"font-size:9pt;color:#70ad47;font-weight:bold\">&#xC258; &#xC5F4;&#xB54C; &#xC0AC;&#xC6A9;&#xC790;&#xC778;&#xC99D;&#xC2DC;&#xD0A4;&#xAE30;</span><span style=\"font-size:9pt;color:#70ad47;font-weight:bold\">)</span></p>\n\t\t\t<br>\n\t\t\t<h2 lang=\"en-US\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">Mongo <span lang=\"ko-KR\">&#xC258;</span> <span lang=\"ko-KR\">&#xC11C;&#xBE44;&#xC2A4;</span> <span lang=\"ko-KR\">&#xC2DC;&#xC791;</span></h2>\n\t\t\t<p lang=\"en-US\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-size:10pt\">mongo localhost -u admin -p 1234 --authenticationDatabase admin --authenticationMechanism SCRAM-SHA-1</span></p>\n\t\t\t<p lang=\"en-US\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-size:10pt\">mongo -u smartbed -p ideasam --authenticationDatabase smartbed --authenticationMechanism SCRAM-SHA-1</span></p>\n\t\t\t<br>\n\t\t\t<p lang=\"en-US\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-size:10pt;text-decoration:underline\">mongo --port 27017 -u admin -p 1234 --authenticationDatabase admin</span></p>\n\t\t\t<p lang=\"en-US\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-size:10pt;text-decoration:underline\">mongo --port 27017 -u </span><span style=\"font-size:10pt\">smartbed </span><span style=\"font-size:10pt;text-decoration:underline\">-p ideasam --authenticationDatabase </span><span style=\"font-size:10pt\">smartbed </span></p>\n\t\t\t<br>\n\t\t\t<h2 style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">mongoDB Path<span lang=\"en-US\"> (</span>&#xC548;&#xC4F0;&#xC774;&#xB294;&#xAC83;<span lang=\"en-US\"> </span>&#xAC19;&#xC74C;<span lang=\"en-US\">)</span></h2>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Helvetica Neue;font-size:9pt;color:#454545;font-weight:bold\">dbPath:</span><span style=\"font-family:Helvetica Neue;font-size:9pt;color:#454545\"> /usr/local/var/mongodb</span></p>\n\t\t\t<p lang=\"en-US\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Helvetica Neue;font-size:9pt;color:#454545;font-weight:bold\">Actual dbPath :</span><span style=\"font-family:Helvetica Neue;font-size:9pt;color:#454545\"> /data/db</span></p>\n\t\t\t<p lang=\"en-US\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Helvetica Neue;font-size:9pt;color:#454545;font-weight:bold\">(Maybe)application path :</span><span style=\"font-family:Helvetica Neue;font-size:9pt;color:#454545\"> </span><span lang=\"ko-KR\" style=\"font-family:Helvetica Neue;font-size:9pt;color:#454545\">/usr/local/bin</span></p>\n\t\t\t<br>\n\t\t\t<h2 lang=\"en-US\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">Mongod.conf <span lang=\"ko-KR\">&#xACBD;&#xB85C;</span></h2>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Helvetica Neue;font-size:9pt;color:#454545\">/usr/local/etc</span></p>\n\t\t\t<br>\n\t\t\t<h2 lang=\"en-US\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">Mongod.conf <span lang=\"ko-KR\">&#xC218;&#xC815;</span></h2>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\">&#xC774;<span lang=\"en-US\"> </span>&#xC124;&#xC815;<span lang=\"en-US\"> </span>&#xC801;&#xC6A9;&#xD558;&#xBA74;<span lang=\"en-US\"> </span>&#xC0AC;&#xC6A9;&#xC790;<span lang=\"en-US\"> </span>&#xC778;&#xC99D;<span lang=\"en-US\">&#xD574;&#xC57C;</span><span lang=\"en-US\"> Collection </span>&#xBCFC;<span lang=\"en-US\"> </span>&#xC218;<span lang=\"en-US\"> </span>&#xC788;&#xC74C;<span lang=\"en-US\">.</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">security:</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">&#xA0;&#xA0; authorization: enabled</span></p>\n\t\t\t<br>\n\t\t\t<h2 lang=\"en-US\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">db&#xC0C1;&#xD0DC; &#xD655;&#xC778;&#xD558;&#xAE30;</h2>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">&gt; db.stats()</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">{</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">&quot;ok&quot; : 0,</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">&quot;errmsg&quot; : &quot;not authorized on test to execute command { dbstats: 1.0, scale: undefined }&quot;,</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">&quot;code&quot; : 13,</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">&quot;codeName&quot; : &quot;Unauthorized&quot;</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">}</span></p>\n\t\t\t<br>\n\t\t\t<h2 lang=\"en-US\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">&#xC0AC;&#xC6A9;&#xC790; &#xAD50;&#xCCB4;</h2>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">&gt; db.auth(&quot;smartbed&quot;,&quot;ideasam&quot;)</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">1</span></p>\n\t\t\t<br>\n\t\t\t<h2 lang=\"en-US\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">&#xC0AC;&#xC6A9;&#xC790; &#xAD8C;&#xD55C;&#xC8FC;&#xAE30;</h2>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">db.grantRolesToUser(&quot;admin&quot;,[&quot;readWrite&quot;])</span></p>\n\t\t\t<br>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">db.grantRolesToUser(&quot;smartbed&quot;,[&quot;readAnyDatabase&quot;])</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">Error: No role named dbAdminAnyDatabase@smartbed</span></p>\n\t\t\t<p lang=\"en-US\" style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"https://groups.google.com/forum/#!topic/mongodb-dev/z5Rm0YihF8E\">https://groups.google.com/forum/#!topic/mongodb-dev/z5Rm0YihF8E</a></p>\n\t\t\t<p lang=\"en-US\" style=\"margin-top:0pt;margin-bottom:0pt\">&#xC77C;&#xBC18; user&#xC5D0;&#xB294; &#xBD80;&#xC5EC;&#xD560; &#xC218; &#xC5C6;&#xB294; role&#xC778; &#xAC83;&#xC774;&#xB2E4;..</p>\n\t\t\t<br>\n\t\t\t<h2 style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">&#xC0AC;&#xC6A9;&#xC790;<span lang=\"en-US\"> </span><span lang=\"en-US\">&#xC815;&#xBCF4;</span><span lang=\"en-US\"> </span><span lang=\"en-US\">&#xBCF4;&#xAE30;</span></h2>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">&gt; db.getUser(&quot;smartbed&quot;)</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">{</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">&quot;_id&quot; : &quot;smartbed.smartbed&quot;,</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">&quot;user&quot; : &quot;smartbed&quot;,</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">&quot;db&quot; : &quot;smartbed&quot;,</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">&quot;roles&quot; : [</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">{</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">&quot;role&quot; : &quot;readWrite&quot;,</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">&quot;db&quot; : &quot;smartbed&quot;</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">}</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">]</span></p>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Monaco;font-size:9pt;color:white;background-color:#282a36\">}</span></p>\n\t\t\t<br>\n\t\t\t<h2 style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">&#xBCF4;&#xC544;&#xD558;&#xB2C8;<span lang=\"en-US\" style=\"font-family:Monaco\">..</span></h2>\n\t\t\t<p lang=\"en-US\" style=\"margin-top:0pt;margin-bottom:0pt\">Show users, show dbs, show collections&#xC5D0; &#xB300;&#xD55C; &#xAC01; &#xAD8C;&#xD55C;&#xC774; &#xC788;&#xB294;&#xB4EF;.</p>\n\t\t\t<p lang=\"en-US\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"text-decoration:underline\">Privileges </span><span style=\"text-decoration:underline\">&#xD398;&#xC774;&#xC9C0;</span><span style=\"text-decoration:underline\"> </span><span style=\"text-decoration:underline\">&#xCC38;&#xC870;</span></p>\n\t\t</div>\n\t\n\n"}}}