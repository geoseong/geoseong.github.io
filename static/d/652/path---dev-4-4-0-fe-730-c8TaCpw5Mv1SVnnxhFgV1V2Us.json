{"pageContext":{"notebook":"Dev","section":"Docker","page":{"id":"0-9aba9c4d07d1d447a8c1a3b1e75520b9!1-BC575AB8E2AB9833!2141","self":"https://www.onenote.com/api/v1.0/me/notes/pages/0-9aba9c4d07d1d447a8c1a3b1e75520b9!1-BC575AB8E2AB9833!2141","createdTime":"2018-10-26T09:23:20.247Z","title":"GitLab Container Registry 등록하기","createdByAppId":"","links":{"oneNoteEmbedUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!1937&parId=BC575AB8E2AB9833!109&wd=target%28Docker.one%7Cc134cdbf-f311-3945-bbdb-f8eecc1a6d52%2FGitLab%20Container%20Registry%20%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0%7C42e2ac74-7529-864e-89ad-5bd960e4a82a%2F%29"},"oneNoteClientUrl":{"href":"onenote:https://d.docs.live.net/bc575ab8e2ab9833/Documents/Dev/Docker.one#GitLab%20Container%20Registry%20%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0&section-id=c134cdbf-f311-3945-bbdb-f8eecc1a6d52&page-id=42e2ac74-7529-864e-89ad-5bd960e4a82a&end"},"oneNoteWebUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!1937&parId=BC575AB8E2AB9833!109&wd=target%28Docker.one%7Cc134cdbf-f311-3945-bbdb-f8eecc1a6d52%2FGitLab%20Container%20Registry%20%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0%7C42e2ac74-7529-864e-89ad-5bd960e4a82a%2F%29"}},"contentUrl":"https://www.onenote.com/api/v1.0/me/notes/pages/0-9aba9c4d07d1d447a8c1a3b1e75520b9!1-BC575AB8E2AB9833!2141/content","lastModifiedTime":"2018-10-26T10:20:12Z","parentSection@odata.context":"https://www.onenote.com/api/v1.0/$metadata#me/notes/sections('0-BC575AB8E2AB9833%212141')/pages('0-9aba9c4d07d1d447a8c1a3b1e75520b9%211-BC575AB8E2AB9833%212141')/parentSection(id,name,self)/$entity","parentSection":{"id":"0-BC575AB8E2AB9833!2141","name":"Docker","self":"https://www.onenote.com/api/v1.0/me/notes/sections/0-BC575AB8E2AB9833!2141"},"content":"       에러    메시지    denied: requested access to the resource is denied    이슈보드    https://gitlab.com/gitlab-org/gitlab-ce/issues/23339    원인    로그인 방법에 문제가 있던것 같다        찾아낸 로그인 방법    docker login -u gitlab-ci-token -p $CI_BUILD_TOKEN $CI_REGISTRY        이후에 실행할 스크립트가 포함된 .gitlab-ci.yml               # This file is a template, and might need editing before it works on your project.      # Official framework image. Look for the different tagged releases at:      # https://hub.docker.com/r/library/node/tags/      image: docker:latest      # Pick zero or more services to be used on all builds.      # Only needed when using a docker container to run your tests in.      # Check out: http://docs.gitlab.com/ce/ci/docker/using_docker_images.html#what-is-a-service      services:      - docker:dind      # - nikolaik/python-nodejs:latest # Docker Hub에서 non-officlal image를 services를 이용해서 가져오는 이 방법은 GitLab CI에서 접근 불가함.      # 사용될 stage명 및 진행 순서 정의      # stages:      # - build      # - test      # - release      # - deploy      # This folder is cached between builds      # http://docs.gitlab.com/ce/ci/yaml/README.html#cache      cache:      paths:      - node_modules/      before_script:      # [Case1] https://hub.docker.com/ 에 가입된 계정으로 로그인을 해야 일반 사용자가 만든 public한 docker image를 pull 해 올 수 있다.      # - docker login -u geoseong -p $GEOSEONG_DOCKER_HUB_PW      # - docker build --tag dockerimg . # docker build <옵션> <Dockerfile 경로>      # - docker images      # - ls /bin -al      # - docker run --env AWS_ACCESS_KEY_ID=$AWS_ACCESS_KEY_ID --env AWS_SECRET_ACCESS_KEY=$AWS_SECRET_ACCESS_KEY -d --name geoseongimg dockerimg:latest aws s3 cp --recursive tmp/ s3://$S3_BUCKET_NAME --acl public-read # docker run <옵션> <이미지 이름> <실행할 파일>      # - docker exec -d dockerimg pip install awscli      # [Case2] GitLab에서 폐쇠적으로 사용하는 Container Registry로 인증해서 내가 만든 이미지 사용하기      - docker login -u gitlab-ci-token -p $CI_BUILD_TOKEN $CI_REGISTRY      # - docker login registry.gitlab.com -u gitlab+deploy-token-23468 -p xiMgxnf119GgeeK4aQ21 $CI_REGISTRY      # - docker login -u $CI_DEPLOY_USER -p $CI_DEPLOY_PASSWORD $CI_REGISTRY            # build_aws_case1:      # # stage: build      # only:      # - geoseong      # script:      # - pwd # /builds/ideasam/mom      # - docker run --env AWS_ACCESS_KEY_ID=$AWS_ACCESS_KEY_ID --env AWS_SECRET_ACCESS_KEY=$AWS_SECRET_ACCESS_KEY -d --name geoseongimg dockerimg:latest aws s3 cp --recursive tmp/ s3://$S3_BUCKET_NAME --acl public-read # docker run <옵션> <이미지 이름> <실행할 파일> / -i(interactive), -t(Pseudo-tty) 옵션을 사용하면 실행된 Bash 셸에 입력 및 출력을 할 수 있습니다.      # - docker ps # 실행된 컨테이너 목록 출력      # - docker exec -it geoseongimg pwd      # - docker exec -d geoseongimg ls /builds/ideasam      # - docker exec -d geoseongimg aws configure      # - npm install      # - pip install awscli      # - aws s3 cp --recursive src/ s3://$S3_BUCKET_NAME --acl public-read      build_aws_case2:      # stage: build      only:      - geoseong      script:      - docker build -t registry.gitlab.com/ideasam/mom:0.1 .      - docker push registry.gitlab.com/ideasam/mom:0.1      # test_aws:      # stage: test      # only:      # - geoseong      # script:      # - docker run -d registry.gitlab.com/ideasam/mom                       ","html":"\n\t\t<div style=\"position:absolute;left:48px;top:139px;width:576px\">\n\t\t\t<h2 lang=\"ko-KR\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xC5D0;&#xB7EC;</span></h2>\n\t\t\t<h3 lang=\"ko-KR\" style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xBA54;&#xC2DC;&#xC9C0;</span></h3>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">denied: requested access to the resource is denied</p>\n\t\t\t<h3 lang=\"ko-KR\" style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xC774;&#xC288;&#xBCF4;&#xB4DC;</span></h3>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"https://gitlab.com/gitlab-org/gitlab-ce/issues/23339\">https://gitlab.com/gitlab-org/gitlab-ce/issues/23339</a></p>\n\t\t\t<h3 lang=\"ko-KR\" style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xC6D0;&#xC778;</span></h3>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xB85C;&#xADF8;&#xC778;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> </span><span style=\"font-family:Malgun Gothic\">&#xBC29;&#xBC95;&#xC5D0;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> </span><span style=\"font-family:Malgun Gothic\">&#xBB38;&#xC81C;&#xAC00;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> </span><span style=\"font-family:Malgun Gothic\">&#xC788;&#xB358;&#xAC83;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> </span><span style=\"font-family:Malgun Gothic\">&#xAC19;&#xB2E4;</span></p>\n\t\t\t<br>\n\t\t\t<h2 lang=\"ko-KR\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xCC3E;&#xC544;&#xB0B8;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic\"> </span><span style=\"font-family:Malgun Gothic\">&#xB85C;&#xADF8;&#xC778;</span><span lang=\"en-US\"> </span><span style=\"font-family:Malgun Gothic\">&#xBC29;&#xBC95;</span></h2>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:10pt;color:white;background-color:black\">docker login -u gitlab-ci-token -p $CI_BUILD_TOKEN $CI_REGISTRY</span></p>\n\t\t\t<br>\n\t\t\t<h2 lang=\"ko-KR\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xC774;&#xD6C4;&#xC5D0;</span><span lang=\"en-US\"> </span><span style=\"font-family:Malgun Gothic\">&#xC2E4;&#xD589;&#xD560;</span><span lang=\"en-US\"> </span><span style=\"font-family:Malgun Gothic\">&#xC2A4;&#xD06C;&#xB9BD;&#xD2B8;&#xAC00;</span><span lang=\"en-US\"> </span><span style=\"font-family:Malgun Gothic\">&#xD3EC;&#xD568;&#xB41C;</span><span lang=\"en-US\"> .gitlab-ci.yml</span></h2>\n\t\t\t<table style=\"border:1px solid;border-collapse:collapse\">\n\t\t\t\t<tbody><tr>\n\t\t\t\t\t<td style=\"background-color:black;border:1px solid\"><p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># This file is a template, and might need editing before it works on your project.</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># Official framework image. Look for the different tagged releases at:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># </span><a href=\"https://hub.docker.com/r/library/node/tags/\" style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\">https://hub.docker.com/r/library/node/tags/</a></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#569cd6\">image</span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#979797\">: </span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#cb8f76\">docker:latest</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># Pick zero or more services to be used on all builds.</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># Only needed when using a docker container to run your tests in.</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># Check out: </span><a href=\"http://docs.gitlab.com/ce/ci/docker/using_docker_images.html#what-is-a-service\" style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\">http://docs.gitlab.com/ce/ci/docker/using_docker_images.html#what-is-a-service</a></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#569cd6\">services</span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#979797\">:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#979797\">- </span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#cb8f76\">docker:dind</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - nikolaik/python-nodejs:latest # Docker Hub&#xC5D0;&#xC11C; non-officlal image&#xB97C; services&#xB97C; &#xC774;&#xC6A9;&#xD574;&#xC11C; &#xAC00;&#xC838;&#xC624;&#xB294; &#xC774; &#xBC29;&#xBC95;&#xC740; GitLab CI&#xC5D0;&#xC11C; &#xC811;&#xADFC; &#xBD88;&#xAC00;&#xD568;.</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># &#xC0AC;&#xC6A9;&#xB420; stage&#xBA85; &#xBC0F; &#xC9C4;&#xD589; &#xC21C;&#xC11C; &#xC815;&#xC758;</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># stages:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - build</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - test</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - release</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - deploy</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># This folder is cached between builds</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># </span><a href=\"http://docs.gitlab.com/ce/ci/yaml/README.html#cache\" style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\">http://docs.gitlab.com/ce/ci/yaml/README.html#cache</a></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#569cd6\">cache</span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#979797\">:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#569cd6\">paths</span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#979797\">:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#979797\">- </span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#cb8f76\">node_modules/</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#569cd6\">before_script</span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#979797\">:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># [Case1] </span><a href=\"https://hub.docker.com/\" style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\">https://hub.docker.com/</a><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"> &#xC5D0; &#xAC00;&#xC785;&#xB41C; &#xACC4;&#xC815;&#xC73C;&#xB85C; &#xB85C;&#xADF8;&#xC778;&#xC744; &#xD574;&#xC57C; &#xC77C;&#xBC18; &#xC0AC;&#xC6A9;&#xC790;&#xAC00; &#xB9CC;&#xB4E0; public&#xD55C; docker image&#xB97C; pull &#xD574; &#xC62C; &#xC218; &#xC788;&#xB2E4;.</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - docker login -u geoseong -p $GEOSEONG_DOCKER_HUB_PW</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - docker build --tag dockerimg . # docker build &lt;&#xC635;&#xC158;&gt; &lt;Dockerfile &#xACBD;&#xB85C;&gt;</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - docker images</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - ls /bin -al</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - docker run --env AWS_ACCESS_KEY_ID=$AWS_ACCESS_KEY_ID --env AWS_SECRET_ACCESS_KEY=$AWS_SECRET_ACCESS_KEY -d --name geoseongimg dockerimg:latest aws s3 cp --recursive tmp/ s3://$S3_BUCKET_NAME --acl public-read # docker run &lt;&#xC635;&#xC158;&gt; &lt;&#xC774;&#xBBF8;&#xC9C0; &#xC774;&#xB984;&gt; &lt;&#xC2E4;&#xD589;&#xD560; &#xD30C;&#xC77C;&gt;</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - docker exec -d dockerimg pip install awscli</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># [Case2] GitLab&#xC5D0;&#xC11C; &#xD3D0;&#xC1E0;&#xC801;&#xC73C;&#xB85C; &#xC0AC;&#xC6A9;&#xD558;&#xB294; Container Registry&#xB85C; &#xC778;&#xC99D;&#xD574;&#xC11C; &#xB0B4;&#xAC00; &#xB9CC;&#xB4E0; &#xC774;&#xBBF8;&#xC9C0; &#xC0AC;&#xC6A9;&#xD558;&#xAE30;</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#979797\">- </span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#cb8f76\">docker login -u gitlab-ci-token -p $CI_BUILD_TOKEN $CI_REGISTRY</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - docker login registry.gitlab.com -u gitlab+deploy-token-23468 -p xiMgxnf119GgeeK4aQ21 $CI_REGISTRY</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - docker login -u $CI_DEPLOY_USER -p $CI_DEPLOY_PASSWORD $CI_REGISTRY</span></p>\n\t\t\t\t\t<br>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># build_aws_case1:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># # stage: build</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># only:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - geoseong</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># script:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - pwd # /builds/ideasam/mom</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - docker run --env AWS_ACCESS_KEY_ID=$AWS_ACCESS_KEY_ID --env AWS_SECRET_ACCESS_KEY=$AWS_SECRET_ACCESS_KEY -d --name geoseongimg dockerimg:latest aws s3 cp --recursive tmp/ s3://$S3_BUCKET_NAME --acl public-read # docker run &lt;&#xC635;&#xC158;&gt; &lt;&#xC774;&#xBBF8;&#xC9C0; &#xC774;&#xB984;&gt; &lt;&#xC2E4;&#xD589;&#xD560; &#xD30C;&#xC77C;&gt; / -i(interactive), -t(Pseudo-tty) &#xC635;&#xC158;&#xC744; &#xC0AC;&#xC6A9;&#xD558;&#xBA74; &#xC2E4;&#xD589;&#xB41C; Bash &#xC178;&#xC5D0; &#xC785;&#xB825; &#xBC0F; &#xCD9C;&#xB825;&#xC744; &#xD560; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - docker ps # &#xC2E4;&#xD589;&#xB41C; &#xCEE8;&#xD14C;&#xC774;&#xB108; &#xBAA9;&#xB85D; &#xCD9C;&#xB825;</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - docker exec -it geoseongimg pwd</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - docker exec -d geoseongimg ls /builds/ideasam</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - docker exec -d geoseongimg aws configure</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - npm install</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - pip install awscli</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - aws s3 cp --recursive src/ s3://$S3_BUCKET_NAME --acl public-read</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#569cd6\">build_aws_case2</span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#979797\">:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># stage: build</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#569cd6\">only</span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#979797\">:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#979797\">- </span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#cb8f76\">geoseong</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#569cd6\">script</span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#979797\">:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#979797\">- </span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#cb8f76\">docker build -t registry.gitlab.com/ideasam/mom:0.1 .</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#979797\">- </span><span lang=\"en-US\" style=\"font-family:D2Coding;font-size:9pt;color:#cb8f76\">docker push registry.gitlab.com/ideasam/mom:0.1</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># test_aws:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># stage: test</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># only:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - geoseong</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># script:</span></p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:D2Coding;font-size:9pt;color:#6a9955\"># - docker run -d registry.gitlab.com/ideasam/mom </span></p>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody></table>\n\t\t</div>\n\t\n\n"}}}