{"pageContext":{"isCreatedByStatefulCreatePages":false,"notebook":"Web Dev","section":"jest and enzyme","page":{"id":"0-ba1477e3638e2e4f9cbaa62c6d0fd0af!1-BC575AB8E2AB9833!2229","self":"https://www.onenote.com/api/v1.0/me/notes/pages/0-ba1477e3638e2e4f9cbaa62c6d0fd0af!1-BC575AB8E2AB9833!2229","createdTime":"2019-01-31T16:03:52.363Z","title":"enzyme에서 context 를 지원하는지?","createdByAppId":"","links":{"oneNoteEmbedUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!1937&parId=BC575AB8E2AB9833!109&wd=target%28jest%20and%20enzyme.one%7C2b7269f2-6459-0943-9534-96ce2ec18f4e%2Fenzyme%EC%97%90%EC%84%9C%20context%20%EB%A5%BC%20%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94%EC%A7%80%7C091a2c65-fa3f-2049-9d12-89308f17eb81%2F%29"},"oneNoteClientUrl":{"href":"onenote:https://d.docs.live.net/bc575ab8e2ab9833/Documents/Web%20Dev/jest%20and%20enzyme.one#enzyme%EC%97%90%EC%84%9C%20context%20%EB%A5%BC%20%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94%EC%A7%80&section-id=2b7269f2-6459-0943-9534-96ce2ec18f4e&page-id=091a2c65-fa3f-2049-9d12-89308f17eb81&end"},"oneNoteWebUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!1937&parId=BC575AB8E2AB9833!109&wd=target%28jest%20and%20enzyme.one%7C2b7269f2-6459-0943-9534-96ce2ec18f4e%2Fenzyme%EC%97%90%EC%84%9C%20context%20%EB%A5%BC%20%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94%EC%A7%80%7C091a2c65-fa3f-2049-9d12-89308f17eb81%2F%29"}},"contentUrl":"https://www.onenote.com/api/v1.0/me/notes/pages/0-ba1477e3638e2e4f9cbaa62c6d0fd0af!1-BC575AB8E2AB9833!2229/content","lastModifiedTime":"2019-02-01T05:45:47Z","parentSection@odata.context":"https://www.onenote.com/api/v1.0/$metadata#me/notes/sections('0-BC575AB8E2AB9833%212229')/pages('0-ba1477e3638e2e4f9cbaa62c6d0fd0af%211-BC575AB8E2AB9833%212229')/parentSection(id,name,self)/$entity","parentSection":{"id":"0-BC575AB8E2AB9833!2229","name":"jest and enzyme","self":"https://www.onenote.com/api/v1.0/me/notes/sections/0-BC575AB8E2AB9833!2229"},"content":"       아직 안하는 듯    https://github.com/reduxjs/react-redux/issues/1161#issuecomment-453715764    Enzyme github issue about context API    https://github.com/airbnb/enzyme/issues/1973        React 공홈에서 Shallow Renderer와 test renderer가 지원됨을 확인    https://reactjs.org/docs/shallow-renderer.html        Context API를 쓰면서 enzyme을 사용한 사례(웹임)    https://codesandbox.io/s/vvp40lqky0        결론은 내가 작업하던 리포 안에 있었다. 역시 등잔 밑이 어둡다는..               import { shallow, render } from 'enzyme';      describe('interaction', () => {        let props;        let wrapper;        let outer;        let context;              beforeEach(() => {          context = {            state: {              user: null,            },            actions: {              setModal: jest.fn(),              showModal: jest.fn(),              onChatPressed: jest.fn(),            }          }          props = {            navigation: {              navigate: jest.fn(),            },            ...context,          };          outer = shallow(<SearchUser {...props} />);          const Children = outer.props().children;          wrapper = shallow(<Children {...props} />);        });        describe('type in TextInput for search Friend', () => {          it('should call onTxtChanged callback', () => {            const spy = jest.spyOn(outer.instance(), 'onTxtChanged');            const txtInput = wrapper.find('TextInput');            txtInput.props().onChangeText('geoseong');            expect(spy).toHaveBeenCalled();            expect(outer.instance().state.users[0].displayName).toEqual('geoseong');          });        });      });                      ","html":"\n\t\t<div style=\"position:absolute;left:61px;top:103px;width:563px\">\n\t\t\t<h2 lang=\"ko-KR\" style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xC544;&#xC9C1;</span> <span style=\"font-family:Malgun Gothic\">&#xC548;&#xD558;&#xB294;</span> <span style=\"font-family:Malgun Gothic\">&#xB4EF;</span></h2>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"https://github.com/reduxjs/react-redux/issues/1161#issuecomment-453715764\">https://github.com/reduxjs/react-redux/issues/1161#issuecomment-453715764</a></p>\n\t\t\t<h3 lang=\"ko-KR\" style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\">Enzyme github issue about context API</h3>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"https://github.com/airbnb/enzyme/issues/1973\">https://github.com/airbnb/enzyme/issues/1973</a></p>\n\t\t\t<br>\n\t\t\t<h2 style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">React <span style=\"font-family:Malgun Gothic\">&#xACF5;&#xD648;&#xC5D0;&#xC11C;</span> Shallow Renderer<span style=\"font-family:Malgun Gothic\">&#xC640;</span> test renderer<span style=\"font-family:Malgun Gothic\">&#xAC00;</span> <span style=\"font-family:Malgun Gothic\">&#xC9C0;&#xC6D0;&#xB428;&#xC744; &#xD655;&#xC778;</span></h2>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"https://reactjs.org/docs/shallow-renderer.html\">https://reactjs.org/docs/shallow-renderer.html</a></p>\n\t\t\t<br>\n\t\t\t<h2 style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\">Context API<span style=\"font-family:Malgun Gothic\">&#xB97C;</span> <span style=\"font-family:Malgun Gothic\">&#xC4F0;&#xBA74;&#xC11C;</span> enzyme<span style=\"font-family:Malgun Gothic\">&#xC744;</span> <span style=\"font-family:Malgun Gothic\">&#xC0AC;&#xC6A9;&#xD55C;</span> <span style=\"font-family:Malgun Gothic\">&#xC0AC;&#xB840;</span>(<span style=\"font-family:Malgun Gothic\">&#xC6F9;&#xC784;</span>)</h2>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"https://codesandbox.io/s/vvp40lqky0\">https://codesandbox.io/s/vvp40lqky0</a></p>\n\t\t\t<br>\n\t\t\t<h2 style=\"font-size:14pt;color:#2e75b5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xACB0;&#xB860;&#xC740;</span> <span style=\"font-family:Malgun Gothic\">&#xB0B4;&#xAC00;</span> <span style=\"font-family:Malgun Gothic\">&#xC791;&#xC5C5;&#xD558;&#xB358;</span> <span style=\"font-family:Malgun Gothic\">&#xB9AC;&#xD3EC;</span> <span style=\"font-family:Malgun Gothic\">&#xC548;&#xC5D0;</span> <span style=\"font-family:Malgun Gothic\">&#xC788;&#xC5C8;&#xB2E4;</span>. <span style=\"font-family:Malgun Gothic\">&#xC5ED;&#xC2DC;</span> <span style=\"font-family:Malgun Gothic\">&#xB4F1;&#xC794;</span> <span style=\"font-family:Malgun Gothic\">&#xBC11;&#xC774;</span> <span style=\"font-family:Malgun Gothic\">&#xC5B4;&#xB461;&#xB2E4;&#xB294;</span>..</h2>\n\t\t\t<table style=\"border:1px solid;border-collapse:collapse\">\n\t\t\t\t<tbody><tr>\n\t\t\t\t\t<td style=\"background-color:#f2f2f2;border:1px solid\"><p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">import { shallow, render } from &apos;enzyme&apos;;</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">describe(&apos;interaction&apos;, () =&gt; {</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">  let props;</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">  let wrapper;</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">  let outer;</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">  let context;</p>\n\t\t\t\t\t<br>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">  beforeEach(() =&gt; {</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    context = {</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">      state: {</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">        user: null,</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">      },</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">      actions: {</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">        setModal: jest.fn(),</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">        showModal: jest.fn(),</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">        onChatPressed: jest.fn(),</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">      }</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    }</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    props = {</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">      navigation: {</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">        navigate: jest.fn(),</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">      },</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">      ...context,</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    };</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    outer = shallow(&lt;SearchUser {...props} /&gt;);</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    const Children = outer.props().children;</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    wrapper = shallow(&lt;Children {...props} /&gt;);</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">  });</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">  describe(&apos;type in TextInput for search Friend&apos;, () =&gt; {</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    it(&apos;should call onTxtChanged callback&apos;, () =&gt; {</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">      const spy = jest.spyOn(outer.instance(), &apos;onTxtChanged&apos;);</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">      const txtInput = wrapper.find(&apos;TextInput&apos;);</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">      txtInput.props().onChangeText(&apos;geoseong&apos;);</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">      expect(spy).toHaveBeenCalled();</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">      expect(outer.instance().state.users[0].displayName).toEqual(&apos;geoseong&apos;);</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    });</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">  });</p>\n\t\t\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">});</p>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody></table>\n\t\t</div>\n\t\n\n"}}}