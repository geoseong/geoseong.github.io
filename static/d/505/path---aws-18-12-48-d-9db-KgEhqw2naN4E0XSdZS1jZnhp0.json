{"pageContext":{"notebook":"AWS","section":"AWS Serverless","page":{"id":"0-cce3645a42b219429c1865e410557570!1-BC575AB8E2AB9833!2059","self":"https://www.onenote.com/api/v1.0/me/notes/pages/0-cce3645a42b219429c1865e410557570!1-BC575AB8E2AB9833!2059","createdTime":"2018-01-25T05:38:51.86Z","title":"Serverless : CodePipeline 해보기","createdByAppId":"","links":{"oneNoteEmbedUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!2000&parId=BC575AB8E2AB9833!109&wd=target%28AWS%20Serverless.one%7C310eb790-101c-5d47-8187-ebe85d1c5958%2FServerless%20%20CodePipeline%20%ED%95%B4%EB%B3%B4%EA%B8%B0%7Cc10faa06-beeb-1a45-92d3-edd75f696e63%2F%29"},"oneNoteClientUrl":{"href":"onenote:https://d.docs.live.net/bc575ab8e2ab9833/Documents/AWS/AWS%20Serverless.one#Serverless%20%20CodePipeline%20%ED%95%B4%EB%B3%B4%EA%B8%B0&section-id=310eb790-101c-5d47-8187-ebe85d1c5958&page-id=c10faa06-beeb-1a45-92d3-edd75f696e63&end"},"oneNoteWebUrl":{"href":"https://onedrive.live.com/redir.aspx?cid=bc575ab8e2ab9833&page=edit&resid=BC575AB8E2AB9833!2000&parId=BC575AB8E2AB9833!109&wd=target%28AWS%20Serverless.one%7C310eb790-101c-5d47-8187-ebe85d1c5958%2FServerless%20%20CodePipeline%20%ED%95%B4%EB%B3%B4%EA%B8%B0%7Cc10faa06-beeb-1a45-92d3-edd75f696e63%2F%29"}},"contentUrl":"https://www.onenote.com/api/v1.0/me/notes/pages/0-cce3645a42b219429c1865e410557570!1-BC575AB8E2AB9833!2059/content","lastModifiedTime":"2018-02-08T05:50:50Z","parentSection@odata.context":"https://www.onenote.com/api/v1.0/$metadata#me/notes/sections('0-BC575AB8E2AB9833%212059')/pages('0-cce3645a42b219429c1865e410557570%211-BC575AB8E2AB9833%212059')/parentSection(id,name,self)/$entity","parentSection":{"id":"0-BC575AB8E2AB9833!2059","name":"AWS Serverless","self":"https://www.onenote.com/api/v1.0/me/notes/sections/0-BC575AB8E2AB9833!2059"},"content":"       참고1 (v)    https://serverless.com/blog/cicd-for-serverless-part-2/        참고2     https://cloudncode.blog/2017/08/01/serverless-ci-part-2-getting-started-with-aws-codepipeline/        Buildspec.yml 에서 artifacts를 다 지워버린다.    version: 0.1    environment_variables:        plaintext:            \"INPUT_FILE\": \"samTemplate.yaml\"    #        \"S3_BUCKET\": \"codepipeline-ap-northeast-2-719488513159\"    #        \"KMS_KEY\": \"969b028a-f9ed-42d0-90f7-cf449228c779\"        phases:        install:            commands:                - npm install                - npm install -g serverless        pre_build:            commands:                - serverless config credentials --provider aws --key [acc_key_id]--secret [acc_secret]        build:            commands:                - serverless deploy function --function saveItem ( 특정 Fn(serverless.yml의 function이름)만 배포하고플때 )                - serverless deploy ( 모두 배포하고플때 )        결과    Lambda 들어가보면 serverless.yml 은 자취를 감췄다       ","html":"\n\t\t<div style=\"position:absolute;left:48px;top:139px;width:576px\">\n\t\t\t<h3 lang=\"ko-KR\" style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xCC38;&#xACE0;</span><span lang=\"en-US\">1 (v)</span></h3>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"https://serverless.com/blog/cicd-for-serverless-part-2/\">https://serverless.com/blog/cicd-for-serverless-part-2/</a></p>\n\t\t\t<br>\n\t\t\t<h3 lang=\"ko-KR\" style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xCC38;&#xACE0;</span><span lang=\"en-US\">2 </span></h3>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><a href=\"https://cloudncode.blog/2017/08/01/serverless-ci-part-2-getting-started-with-aws-codepipeline/\">https://cloudncode.blog/2017/08/01/serverless-ci-part-2-getting-started-with-aws-codepipeline/</a></p>\n\t\t\t<br>\n\t\t\t<h3 style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-weight:bold\">Buildspec.yml</span> <span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xC5D0;&#xC11C;</span> artifacts<span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xB97C;</span> <span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xB2E4;</span> <span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xC9C0;&#xC6CC;&#xBC84;&#xB9B0;&#xB2E4;</span>.</h3>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">version: 0.1</p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">environment_variables:</p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    plaintext:</p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">        &quot;INPUT_FILE&quot;: &quot;samTemplate.yaml&quot;</p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"color:#7f7f7f\">#        &quot;S3_BUCKET&quot;: &quot;codepipeline-ap-northeast-2-719488513159&quot;</span></p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"color:#7f7f7f\">#        &quot;KMS_KEY&quot;: &quot;969b028a-f9ed-42d0-90f7-cf449228c779&quot;</span></p>\n\t\t\t<br>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">phases:</p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    install:</p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">        commands:</p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">            - npm install</p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">            - npm install -g serverless</p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    pre_build:</p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">        commands:</p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">            - serverless config credentials --provider aws --key [<span lang=\"en-US\" style=\"font-family:Malgun Gothic\">acc_key_id]</span>--secret [acc_secret]</p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">    build:</p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">        commands:</p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\">           <span style=\"font-weight:bold\"> - serverless deploy function --function saveItem</span><span lang=\"en-US\" style=\"font-weight:bold\"> </span><span style=\"font-weight:bold\">( </span><span style=\"font-family:Malgun Gothic;font-weight:bold\">&#xD2B9;&#xC815;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic;font-weight:bold\"> Fn</span><span lang=\"en-US\" style=\"font-weight:bold\">(</span><span style=\"font-weight:bold\">serverless.yml</span><span style=\"font-family:Malgun Gothic;font-weight:bold\">&#xC758;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic;font-weight:bold\"> function</span><span style=\"font-family:Malgun Gothic;font-weight:bold\">&#xC774;&#xB984;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic;font-weight:bold\">)</span><span style=\"font-family:Malgun Gothic;font-weight:bold\">&#xB9CC;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic;font-weight:bold\"> </span><span style=\"font-family:Malgun Gothic;font-weight:bold\">&#xBC30;&#xD3EC;&#xD558;&#xACE0;&#xD50C;&#xB54C;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic;font-weight:bold\"> )</span></p>\n\t\t\t<p lang=\"ko-KR\" style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-weight:bold\">            - serverless deploy</span><span lang=\"en-US\" style=\"font-weight:bold\"> ( </span><span style=\"font-family:Malgun Gothic;font-weight:bold\">&#xBAA8;&#xB450;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic;font-weight:bold\"> </span><span style=\"font-family:Malgun Gothic;font-weight:bold\">&#xBC30;&#xD3EC;&#xD558;&#xACE0;&#xD50C;&#xB54C;</span><span lang=\"en-US\" style=\"font-family:Malgun Gothic;font-weight:bold\"> )</span></p>\n\t\t\t<br>\n\t\t\t<h3 lang=\"ko-KR\" style=\"color:#5b9bd5;margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">&#xACB0;&#xACFC;</span></h3>\n\t\t\t<p style=\"margin-top:0pt;margin-bottom:0pt\"><span style=\"font-family:Malgun Gothic\">Lambda </span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xB4E4;&#xC5B4;&#xAC00;&#xBCF4;&#xBA74;</span><span style=\"font-family:Malgun Gothic\"> serverless.yml </span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xC740;</span><span style=\"font-family:Malgun Gothic\"> </span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xC790;&#xCDE8;&#xB97C;</span><span style=\"font-family:Malgun Gothic\"> </span><span lang=\"ko-KR\" style=\"font-family:Malgun Gothic\">&#xAC10;&#xCDC4;&#xB2E4;</span></p>\n\t\t</div>\n\t\n\n"}}}